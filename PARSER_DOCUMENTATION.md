# üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –ø–∞—Ä—Å–µ—Ä—É –¥–∞–Ω–Ω—ã—Ö TrendAgent

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä](#–æ–±–∑–æ—Ä)
2. [–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–∞—Ä—Å–µ—Ä–∞](#–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏-–ø–∞—Ä—Å–µ—Ä–∞)
3. [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞)
4. [–ö–æ–º–∞–Ω–¥—ã –ø–∞—Ä—Å–µ—Ä–∞](#–∫–æ–º–∞–Ω–¥—ã-–ø–∞—Ä—Å–µ—Ä–∞)
5. [–¢–∏–ø—ã –æ–±—ä–µ–∫—Ç–æ–≤](#—Ç–∏–ø—ã-–æ–±—ä–µ–∫—Ç–æ–≤)
6. [API Endpoints](#api-endpoints)
7. [–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å](#–∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å)
8. [–†–∞—Å–ø–∏—Å–∞–Ω–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞](#—Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è-–ø–∞—Ä—Å–∏–Ω–≥–∞)
9. [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ](#–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-–∏-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)
10. [–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫](#–æ–±—Ä–∞–±–æ—Ç–∫–∞-–æ—à–∏–±–æ–∫)
11. [–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#–ø—Ä–∏–º–µ—Ä—ã-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
12. [Troubleshooting](#troubleshooting)

---

## üéØ –û–±–∑–æ—Ä

–ü–∞—Ä—Å–µ—Ä –¥–∞–Ω–Ω—ã—Ö TrendAgent –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –æ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ –∏–∑ API TrendAgent –≤ –ª–æ–∫–∞–ª—å–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö. –ü–∞—Ä—Å–µ—Ä –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã –æ–±—ä–µ–∫—Ç–æ–≤: –∫–≤–∞—Ä—Ç–∏—Ä—ã, –ø–∞—Ä–∫–∏–Ω–≥–∏, –ø–æ—Å–µ–ª–∫–∏, —É—á–∞—Å—Ç–∫–∏, –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã –∏ –ø–æ–º–µ—â–µ–Ω–∏—è.

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ API TrendAgent
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤ –æ–±—ä–µ–∫—Ç–æ–≤
- ‚úÖ –†–∞–±–æ—Ç–∞ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –≥–æ—Ä–æ–¥–∞–º–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- ‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ü–µ–Ω –∏ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- ‚úÖ –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–∞—Ä—Å–µ—Ä–∞

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–∏–ø—ã –æ–±—ä–µ–∫—Ç–æ–≤

1. **–ö–≤–∞—Ä—Ç–∏—Ä—ã (blocks)** - –ñ–∏–ª—ã–µ –∫–æ–º–ø–ª–µ–∫—Å—ã –∏ –∫–≤–∞—Ä—Ç–∏—Ä—ã
2. **–ü–∞—Ä–∫–∏–Ω–≥–∏ (parkings)** - –ü–∞—Ä–∫–æ–≤–æ—á–Ω—ã–µ –º–µ—Å—Ç–∞
3. **–ü–æ—Å–µ–ª–∫–∏ (villages)** - –î–æ–º–∞ —Å —É—á–∞—Å—Ç–∫–∞–º–∏
4. **–£—á–∞—Å—Ç–∫–∏ (plots)** - –ó–µ–º–µ–ª—å–Ω—ã–µ —É—á–∞—Å—Ç–∫–∏
5. **–ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã (commercial-blocks)** - –ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–µ –∑–¥–∞–Ω–∏—è
6. **–ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–µ –ø–æ–º–µ—â–µ–Ω–∏—è (commercial-premises)** - –ü–æ–º–µ—â–µ–Ω–∏—è –≤ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö –æ–±—ä–µ–∫—Ç–∞—Ö

### –ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

- üîÑ **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π
- üì∏ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
- üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - –ü–æ–¥—Ä–æ–±–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞–∂–¥–æ–º—É —Ç–∏–ø—É –æ–±—ä–µ–∫—Ç–æ–≤
- ‚è∞ **–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞
- üîç **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –∏ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- üíæ **–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π** - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Ü–µ–Ω –∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–∞–Ω–Ω—ã—Ö

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- PHP 8.2+
- Laravel 11
- MySQL/PostgreSQL
- –î–æ—Å—Ç—É–ø –∫ API TrendAgent

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ —Ñ–∞–π–ª–µ `.env` –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

```env
# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ TrendAgent API
TREND_SSO_URL=https://sso.trendagent.ru/api/auth/login
TREND_API_BASE_URL=https://api.trendagent.ru

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=your_database
DB_USERNAME=your_username
DB_PASSWORD=your_password
```

### –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π

```bash
php artisan migrate
```

–≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–∞—Ä—Å–µ—Ä–∞.

---

## üéÆ –ö–æ–º–∞–Ω–¥—ã –ø–∞—Ä—Å–µ—Ä–∞

### –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞

```bash
php artisan trend:parse
```

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–∞–Ω–¥—ã

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|----------|----------|--------|
| `--type` | –¢–∏–ø—ã –æ–±—ä–µ–∫—Ç–æ–≤ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ (–º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ) | `--type=blocks --type=villages` |
| `--city` | GUID –≥–æ—Ä–æ–¥–æ–≤ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ (–º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ) | `--city=msk --city=spb` |
| `--check-images` | –ü—Ä–æ–≤–µ—Ä—è—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π | `--check-images` |
| `--force` | –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –æ–±—ä–µ–∫—Ç–æ–≤ | `--force` |
| `--limit` | –õ–∏–º–∏—Ç –æ–±—ä–µ–∫—Ç–æ–≤ –Ω–∞ —Ç–∏–ø (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1000) | `--limit=500` |
| `--offset` | –°–º–µ—â–µ–Ω–∏–µ –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0) | `--offset=100` |
| `--skip-errors` | –ü—Ä–æ–ø—É—Å–∫–∞—Ç—å –æ—à–∏–±–∫–∏ –∏ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å | `--skip-errors` |
| `--phone` | –¢–µ–ª–µ—Ñ–æ–Ω –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ | `--phone=+79045393434` |
| `--password` | –ü–∞—Ä–æ–ª—å –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ | `--password=your_password` |

#### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–ü–∞—Ä—Å–∏–Ω–≥ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –æ–±—ä–µ–∫—Ç–æ–≤ –¥–ª—è –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –≥–æ—Ä–æ–¥–æ–≤:**
```bash
php artisan trend:parse
```

**–ü–∞—Ä—Å–∏–Ω–≥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ç–∏–ø–æ–≤ –æ–±—ä–µ–∫—Ç–æ–≤:**
```bash
php artisan trend:parse --type=blocks --type=villages
```

**–ü–∞—Ä—Å–∏–Ω–≥ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –≥–æ—Ä–æ–¥–æ–≤:**
```bash
php artisan trend:parse --city=msk --city=spb
```

**–ü–∞—Ä—Å–∏–Ω–≥ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:**
```bash
php artisan trend:parse --check-images
```

**–ü–∞—Ä—Å–∏–Ω–≥ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞:**
```bash
php artisan trend:parse --limit=500
```

**–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –æ–±—ä–µ–∫—Ç–æ–≤:**
```bash
php artisan trend:parse --force
```

**–ü–∞—Ä—Å–∏–Ω–≥ —Å –ø—Ä–æ–ø—É—Å–∫–æ–º –æ—à–∏–±–æ–∫:**
```bash
php artisan trend:parse --skip-errors
```

### –ö–æ–º–∞–Ω–¥–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞

```bash
php artisan trend:parse-scheduler
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–æ–º Laravel –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞.

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| `--dry-run` | –ü–æ–∫–∞–∑–∞—Ç—å –∫–∞–∫–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –±—É–¥—É—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –±–µ–∑ –∑–∞–ø—É—Å–∫–∞ |

#### –ü—Ä–∏–º–µ—Ä

```bash
php artisan trend:parse-scheduler --dry-run
```

---

## üè¢ –¢–∏–ø—ã –æ–±—ä–µ–∫—Ç–æ–≤

### 1. –ö–≤–∞—Ä—Ç–∏—Ä—ã (blocks)

**–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `https://api.trendagent.ru/v4_29/blocks/search/`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
- `city` - GUID –≥–æ—Ä–æ–¥–∞
- `lang` - –Ø–∑—ã–∫ (ru/en)
- `count` - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–æ–≤
- `offset` - –°–º–µ—â–µ–Ω–∏–µ –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
- `sort` - –ü–æ–ª–µ –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
- `sort_order` - –ü–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ (asc/desc)

**–ü—Ä–∏–º–µ—Ä:**
```bash
php artisan trend:parse --type=blocks --city=msk --limit=1000
```

### 2. –ü–∞—Ä–∫–∏–Ω–≥–∏ (parkings)

**–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `https://parkings.trendagent.ru/search/places/`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
- `city` - GUID –≥–æ—Ä–æ–¥–∞
- `lang` - –Ø–∑—ã–∫ (ru/en)
- `count` - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–æ–≤

**–ü—Ä–∏–º–µ—Ä:**
```bash
php artisan trend:parse --type=parkings --city=msk
```

### 3. –ü–æ—Å–µ–ª–∫–∏ (villages)

**–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `https://house-api.trendagent.ru/v1/search/villages`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
- `city` - GUID –≥–æ—Ä–æ–¥–∞
- `lang` - –Ø–∑—ã–∫ (ru/en)
- `count` - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–æ–≤
- `sort_type` - –¢–∏–ø —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
- `sort_order` - –ü–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ (asc/desc)

**–ü—Ä–∏–º–µ—Ä:**
```bash
php artisan trend:parse --type=villages --city=msk
```

### 4. –£—á–∞—Å—Ç–∫–∏ (plots)

**–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `https://house-api.trendagent.ru/v1/filter/plots`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
- `city` - GUID –≥–æ—Ä–æ–¥–∞
- `lang` - –Ø–∑—ã–∫ (ru/en)
- `count` - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–æ–≤

**–ü—Ä–∏–º–µ—Ä:**
```bash
php artisan trend:parse --type=plots --city=msk
```

### 5. –ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã (commercial-blocks)

**–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `https://commerce.trendagent.ru/search/blocks/`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
- `city` - GUID –≥–æ—Ä–æ–¥–∞
- `lang` - –Ø–∑—ã–∫ (ru/en)
- `count` - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–æ–≤
- `show_type` - –¢–∏–ø –ø–æ–∫–∞–∑–∞
- `sort` - –ü–æ–ª–µ –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
- `sort_order` - –ü–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ (asc/desc)

**–ü—Ä–∏–º–µ—Ä:**
```bash
php artisan trend:parse --type=commercial-blocks --city=msk
```

### 6. –ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–µ –ø–æ–º–µ—â–µ–Ω–∏—è (commercial-premises)

**–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `https://commerce.trendagent.ru/search/premises`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
- `city` - GUID –≥–æ—Ä–æ–¥–∞
- `lang` - –Ø–∑—ã–∫ (ru/en)
- `count` - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–æ–≤

**–ü—Ä–∏–º–µ—Ä:**
```bash
php artisan trend:parse --type=commercial-premises --city=msk
```

---

## üåê API Endpoints

–í—Å–µ API endpoints –Ω–∞—Ö–æ–¥—è—Ç—Å—è –ø–æ–¥ –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `/api/v1/` –∏ —Ç—Ä–µ–±—É—é—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞–º–∏

#### –°–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç–æ–≤ –ø–æ —Ç–∏–ø—É

```
GET /api/v1/blocks
GET /api/v1/parkings
GET /api/v1/villages
GET /api/v1/plots
GET /api/v1/commercial-blocks
GET /api/v1/commercial-premises
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
- `per_page` - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 15)
- `page` - –ù–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- `filter[...]` - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

**–ü—Ä–∏–º–µ—Ä:**
```bash
curl -H "Authorization: Bearer {token}" \
     https://your-domain.com/api/v1/blocks?per_page=50&filter[city_id]=1
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ –ø–æ ID

```
GET /api/v1/blocks/{id}
GET /api/v1/villages/{id}
GET /api/v1/plots/{id}
# –∏ —Ç.–¥.
```

**–ü—Ä–∏–º–µ—Ä:**
```bash
curl -H "Authorization: Bearer {token}" \
     https://your-domain.com/api/v1/blocks/123
```

#### –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ –≤—Ä—É—á–Ω—É—é

```
POST /api/v1/blocks
POST /api/v1/villages
# –∏ —Ç.–¥.
```

**–ü—Ä–∏–º–µ—Ä:**
```bash
curl -X POST \
     -H "Authorization: Bearer {token}" \
     -H "Content-Type: application/json" \
     -d '{"name": "–ù–æ–≤—ã–π –æ–±—ä–µ–∫—Ç", "city_id": 1, "guid": "unique-guid"}' \
     https://your-domain.com/api/v1/blocks
```

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞

```
PUT /api/v1/blocks/{id}
PATCH /api/v1/blocks/{id}
# –∏ —Ç.–¥.
```

#### –£–¥–∞–ª–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞

```
DELETE /api/v1/blocks/{id}
# –∏ —Ç.–¥.
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –£–¥–∞–ª–µ–Ω–∏–µ –º—è–≥–∫–æ–µ (soft delete), –æ–±—ä–µ–∫—Ç –º–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å.

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö

```
POST /api/v1/blocks/{id}/check-actuality
```

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–∞, —Å—Ä–∞–≤–Ω–∏–≤–∞—è –∏—Ö —Å –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ API.

#### –ü–æ–ª—É—á–µ–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤

```
GET /api/v1/blocks/outdated?days=7
GET /api/v1/villages/outdated?days=7
```

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –æ–±–Ω–æ–≤–ª—è–ª–∏—Å—å –±–æ–ª–µ–µ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –¥–Ω–µ–π.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `days` - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 7)
- `per_page` - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è–º–∏

#### –°–ø–∏—Å–æ–∫ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π

```
GET /api/v1/parser-schedules
```

#### –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

```
POST /api/v1/parser-schedules
```

**–ü—Ä–∏–º–µ—Ä —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "object_type": "blocks",
  "city_ids": [1, 2],
  "time_from": "09:00",
  "time_to": "18:00",
  "days_of_week": [1, 2, 3, 4, 5],
  "is_active": true
}
```

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

```
PUT /api/v1/parser-schedules/{id}
PATCH /api/v1/parser-schedules/{id}
```

#### –£–¥–∞–ª–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

```
DELETE /api/v1/parser-schedules/{id}
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∞–º–∏

#### –°–ø–∏—Å–æ–∫ –æ—à–∏–±–æ–∫

```
GET /api/v1/parser-errors
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `status` - –§–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É (pending, resolved, ignored)
- `object_type` - –§–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É –æ–±—ä–µ–∫—Ç–∞
- `per_page` - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ –ø–æ ID

```
GET /api/v1/parser-errors/{id}
```

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏

```
PUT /api/v1/parser-errors/{id}
PATCH /api/v1/parser-errors/{id}
```

**–ü—Ä–∏–º–µ—Ä (–æ—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ —Ä–µ—à–µ–Ω–Ω—É—é):**
```json
{
  "status": "resolved",
  "resolution_notes": "–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤—Ä—É—á–Ω—É—é"
}
```

---

## üñ•Ô∏è –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

### –î–æ—Å—Ç—É–ø –∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

–ü–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω —Ä–∞–∑–¥–µ–ª **"–ü–∞—Ä—Å–µ—Ä –¥–∞–Ω–Ω—ã—Ö"** —Å —Å–ª–µ–¥—É—é—â–∏–º–∏ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–∞–º–∏:

1. **–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è** (`/admin/parser`)
   - –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
   - –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
   - –ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

2. **–û–±—ä–µ–∫—Ç—ã –ø–∞—Ä—Å–µ—Ä–∞** (`/admin/parser/objects`)
   - –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –ø–æ —Ç–∏–ø–∞–º
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–∏—Å–∫
   - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö

3. **–†–∞—Å–ø–∏—Å–∞–Ω–∏—è** (`/admin/parser/schedules`)
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è–º–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞
   - –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π
   - –ê–∫—Ç–∏–≤–∞—Ü–∏—è/–¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π

4. **–û—à–∏–±–∫–∏** (`/admin/parser/errors`)
   - –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—à–∏–±–æ–∫ –ø–∞—Ä—Å–∏–Ω–≥–∞
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å—É –∏ —Ç–∏–ø—É
   - –û—Ç–º–µ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∫–∞–∫ —Ä–µ—à–µ–Ω–Ω—ã—Ö

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ–≥–∏–æ–Ω–æ–≤

–ü–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–∞—Ä—Å–µ—Ä–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≥–æ—Ä–æ–¥–∞ –≤ —Ä–∞–∑–¥–µ–ª–µ **"–†–µ–≥–∏–æ–Ω—ã"** (`/admin/regions`):

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–†–µ–≥–∏–æ–Ω—ã"
2. –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–≥–∏–æ–Ω
3. –û—Ç–º–µ—Ç—å—Ç–µ –≥–æ—Ä–æ–¥–∞, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø–∞—Ä—Å–∏–Ω–≥
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

---

## üìÖ –†–∞—Å–ø–∏—Å–∞–Ω–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π

–†–∞—Å–ø–∏—Å–∞–Ω–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –ø–æ–∑–≤–æ–ª—è—é—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é.

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

- **–¢–∏–ø –æ–±—ä–µ–∫—Ç–∞** - –ö–∞–∫–æ–π —Ç–∏–ø –æ–±—ä–µ–∫—Ç–æ–≤ –ø–∞—Ä—Å–∏—Ç—å
- **–ì–æ—Ä–æ–¥–∞** - –î–ª—è –∫–∞–∫–∏—Ö –≥–æ—Ä–æ–¥–æ–≤ –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø–∞—Ä—Å–∏–Ω–≥
- **–í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞** - –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ (—Ñ–æ—Ä–º–∞—Ç HH:mm)
- **–í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è** - –í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞ (—Ñ–æ—Ä–º–∞—Ç HH:mm)
- **–î–Ω–∏ –Ω–µ–¥–µ–ª–∏** - –í –∫–∞–∫–∏–µ –¥–Ω–∏ –Ω–µ–¥–µ–ª–∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ (1-–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫, 7-–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ)
- **–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** - –í–∫–ª—é—á–µ–Ω–æ/–≤—ã–∫–ª—é—á–µ–Ω–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ

#### –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–ü–∞—Ä—Å–µ—Ä –¥–∞–Ω–Ω—ã—Ö" ‚Üí "–†–∞—Å–ø–∏—Å–∞–Ω–∏—è"
2. –ù–∞–∂–º–∏—Ç–µ "–°–æ–∑–¥–∞—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ"
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ–ª—è
4. –ù–∞–∂–º–∏—Ç–µ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"

#### –ü—Ä–∏–º–µ—Ä —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

```json
{
  "object_type": "blocks",
  "city_ids": [1, 2, 3],
  "time_from": "09:00",
  "time_to": "18:00",
  "days_of_week": [1, 2, 3, 4, 5],
  "is_active": true
}
```

–≠—Ç–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –±—É–¥–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ –∫–≤–∞—Ä—Ç–∏—Ä –¥–ª—è –≥–æ—Ä–æ–¥–æ–≤ —Å ID 1, 2, 3 —Å 9:00 –¥–æ 18:00 –≤ —Ä–∞–±–æ—á–∏–µ –¥–Ω–∏.

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ Laravel

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ —Ñ–∞–π–ª–µ `app/Console/Kernel.php` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫:

```php
protected function schedule(Schedule $schedule)
{
    // –ó–∞–ø—É—Å–∫ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
    $schedule->command('trend:parse-scheduler')->everyFiveMinutes();
}
```

–ò —á—Ç–æ cron –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
* * * * * cd /path-to-your-project && php artisan schedule:run >> /dev/null 2>&1
```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–∞—Ä—Å–µ—Ä–∞ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ —Ñ–∞–π–ª—ã Laravel. –û—Å–Ω–æ–≤–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è:

- ‚úÖ –£—Å–ø–µ—à–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ –æ–±—ä–µ–∫—Ç–æ–≤
- ‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (–Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ —Ç.–¥.)
- ‚ùå –û—à–∏–±–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞
- ‚è±Ô∏è –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∑–∞–ø–∏—Å–µ–π
tail -f storage/logs/laravel.log

# –ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫ –ø–∞—Ä—Å–µ—Ä–∞
grep "ParseTrendData" storage/logs/laravel.log

# –ü–æ–∏—Å–∫ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
grep "execution_time" storage/logs/laravel.log
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –ø–∞—Ä—Å–µ—Ä–∞ –≤—ã–≤–æ–¥–∏—Ç—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:

```
üìä –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:

+------------------+------------------+----------+-----------+----------+
| –¢–∏–ø –æ–±—ä–µ–∫—Ç–∞      | –í—Å–µ–≥–æ –ø–æ–ª—É—á–µ–Ω–æ   | –°–æ–∑–¥–∞–Ω–æ  | –û–±–Ω–æ–≤–ª–µ–Ω–æ | –û—à–∏–±–æ–∫   |
+------------------+------------------+----------+-----------+----------+
| –ö–≤–∞—Ä—Ç–∏—Ä—ã         | 1250             | 45       | 1205      | 0        |
| –ü–æ—Å–µ–ª–∫–∏          | 320              | 12       | 308       | 0        |
+------------------+------------------+----------+-----------+----------+

‚è±Ô∏è  –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: 15 –º–∏–Ω 32 —Å–µ–∫
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

–í –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –Ω–∞ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞—Ä—Å–µ—Ä–æ–º –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è:

- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–æ–≤
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞
- –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–ø—É—Å–∫–∞ –ø–∞—Ä—Å–µ—Ä–∞

---

## üõ†Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –¢–∏–ø—ã –æ—à–∏–±–æ–∫

–ü–∞—Ä—Å–µ—Ä –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã –æ—à–∏–±–æ–∫:

1. **–û—à–∏–±–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏** - –ü—Ä–æ–±–ª–µ–º—ã —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ API
2. **–û—à–∏–±–∫–∏ —Å–µ—Ç–∏** - –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ–º
3. **–û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏** - –ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ API
4. **–û—à–∏–±–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö** - –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö
5. **–û—à–∏–±–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** - –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

### –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—à–∏–±–æ–∫

–û—à–∏–±–∫–∏ –º–æ–∂–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å:

1. –í –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏: "–ü–∞—Ä—Å–µ—Ä –¥–∞–Ω–Ω—ã—Ö" ‚Üí "–û—à–∏–±–∫–∏"
2. –í –ª–æ–≥-—Ñ–∞–π–ª–∞—Ö: `storage/logs/laravel.log`
3. –í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö: —Ç–∞–±–ª–∏—Ü–∞ `parser_errors`

### –†–µ—à–µ–Ω–∏–µ –æ—à–∏–±–æ–∫

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ** - –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –æ—à–∏–±–∫–∏ —Ä–µ—à–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –ø–∞—Ä—Å–∏–Ω–≥–µ
2. **–†—É—á–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ** - –í –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –º–æ–∂–Ω–æ –æ—Ç–º–µ—Ç–∏—Ç—å –æ—à–∏–±–∫—É –∫–∞–∫ —Ä–µ—à–µ–Ω–Ω—É—é
3. **–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ú–æ–∂–Ω–æ –æ—Ç–º–µ—Ç–∏—Ç—å –æ—à–∏–±–∫—É –∫–∞–∫ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º—É—é

### –ü—Ä–∏–º–µ—Ä—ã —Ç–∏–ø–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫

#### –û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

```
‚ùå –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–µ —É–¥–∞–ª–∞—Å—å
```

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏ –ø–∞—Ä–æ–ª—è –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö –∫–æ–º–∞–Ω–¥—ã.

#### –û—à–∏–±–∫–∞ —Å–µ—Ç–∏

```
‚ùå –û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –∫ API: Connection timeout
```

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å API TrendAgent.

#### –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

```
‚ùå –û—à–∏–±–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –æ–±—ä–µ–∫—Ç–∞: Invalid data structure
```

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –≤ API –æ—Ç–≤–µ—Ç–µ, –≤–æ–∑–º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∞.

---

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ –∫–≤–∞—Ä—Ç–∏—Ä –¥–ª—è –ú–æ—Å–∫–≤—ã

```bash
php artisan trend:parse --type=blocks --city=msk --check-images
```

### –ü—Ä–∏–º–µ—Ä 2: –ü–∞—Ä—Å–∏–Ω–≥ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –æ–±—ä–µ–∫—Ç–æ–≤ –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≥–æ—Ä–æ–¥–æ–≤

```bash
php artisan trend:parse --type=blocks --type=villages --type=plots \
  --city=msk --city=spb --city=krd --limit=1000
```

### –ü—Ä–∏–º–µ—Ä 3: –ë—ã—Å—Ç—Ä–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (–±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)

```bash
php artisan trend:parse --type=blocks --city=msk --limit=500 --offset=0
```

### –ü—Ä–∏–º–µ—Ä 4: –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –æ–±—ä–µ–∫—Ç–æ–≤

```bash
php artisan trend:parse --force
```

### –ü—Ä–∏–º–µ—Ä 5: –ü–∞—Ä—Å–∏–Ω–≥ —Å –ø—Ä–æ–ø—É—Å–∫–æ–º –æ—à–∏–±–æ–∫ (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)

```bash
php artisan trend:parse --type=blocks --skip-errors
```

### –ü—Ä–∏–º–µ—Ä 6: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ —á–µ—Ä–µ–∑ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ

1. –°–æ–∑–¥–∞–π—Ç–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏:
   - –¢–∏–ø: blocks
   - –ì–æ—Ä–æ–¥–∞: –ú–æ—Å–∫–≤–∞, –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥
   - –í—Ä–µ–º—è: 02:00 - 06:00
   - –î–Ω–∏: –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ - –ü—è—Ç–Ω–∏—Ü–∞

2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ Laravel –∑–∞–ø—É—â–µ–Ω:
   ```bash
   php artisan schedule:run
   ```

3. –ü–∞—Ä—Å–∏–Ω–≥ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é.

### –ü—Ä–∏–º–µ—Ä 7: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ API

```bash
curl -X POST \
     -H "Authorization: Bearer {token}" \
     -H "Content-Type: application/json" \
     https://your-domain.com/api/v1/blocks/123/check-actuality
```

### –ü—Ä–∏–º–µ—Ä 8: –ü–æ–ª—É—á–µ–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤

```bash
curl -H "Authorization: Bearer {token}" \
     "https://your-domain.com/api/v1/blocks/outdated?days=7&per_page=50"
```

---

## üîß Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–∞—Ä—Å–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã: `php artisan migrate`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤ `.env`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `tail -f storage/logs/laravel.log`

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É–∫–∞–∑–∞–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç–µ–ª–µ—Ñ–æ–Ω –∏ –ø–∞—Ä–æ–ª—å
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å API TrendAgent SSO
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –æ—à–∏–±–∫–µ

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–µ–¥–ª–µ–Ω–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥

**–†–µ—à–µ–Ω–∏–µ:**
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä `--limit` –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –æ–±—ä–µ–∫—Ç–æ–≤
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `--city` –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –≥–æ—Ä–æ–¥–æ–≤
3. –û—Ç–∫–ª—é—á–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, –µ—Å–ª–∏ –æ–Ω–∞ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–∞: —É–±—Ä–∞—Ç—å `--check-images`
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∏ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö: `php artisan migrate:status`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `--skip-errors` –¥–ª—è –ø—Ä–æ–ø—É—Å–∫–∞ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤

### –ü—Ä–æ–±–ª–µ–º–∞: –†–∞—Å–ø–∏—Å–∞–Ω–∏—è –Ω–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ Laravel –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ cron
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –∞–∫—Ç–∏–≤–Ω—ã –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞: `grep "trend:parse-scheduler" storage/logs/laravel.log`

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `--check-images` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ URL –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
3. –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–æ–≥—É—Ç –±—ã—Ç—å –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ

---

## üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:
- `blocks` - –ö–≤–∞—Ä—Ç–∏—Ä—ã
- `parkings` - –ü–∞—Ä–∫–∏–Ω–≥–∏
- `villages` - –ü–æ—Å–µ–ª–∫–∏
- `plots` - –£—á–∞—Å—Ç–∫–∏
- `commercial_blocks` - –ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã
- `commercial_premises` - –ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–µ –ø–æ–º–µ—â–µ–Ω–∏—è
- `parser_schedules` - –†–∞—Å–ø–∏—Å–∞–Ω–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞
- `parser_errors` - –û—à–∏–±–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞
- `data_changes` - –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–∞–Ω–Ω—ã—Ö
- `price_history` - –ò—Å—Ç–æ—Ä–∏—è —Ü–µ–Ω

### –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —ç—Ç—É –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
2. –ò–∑—É—á–∏—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
3. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** –î–µ–∫–∞–±—Ä—å 2025
**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:** 1.0

