import{_ as T,r as c,c as n,a as t,t as i,b as f,d as m,I as P,v as g,o as l,n as N,k as q,x as W,F as U,q as V,h as D,p as z,w as G,N as O,f as F,m as X,l as Y}from"./admin-zkDx62Hg.js";import{a as A,c as S,b as K,d as R}from"./api-BACpyIk9.js";import{S as h}from"./sweetalert2.esm.all-C0u8rGqG.js";const Z={name:"ConsultationDetail",props:{consultation:{type:Object,required:!0},botId:{type:[String,Number],required:!0}},emits:["close","updated"],setup(d,{emit:e}){const a=c(!1),o=c({status:d.consultation.status,admin_notes:d.consultation.admin_notes||""});return{form:o,saving:a,saveConsultation:async()=>{a.value=!0;try{const s=await A(`/bot-management/${d.botId}/consultations/${d.consultation.id}`,o.value);if(!s.ok){const r=await s.json().catch(()=>({}));throw new Error(r.message||"–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è")}await h.fire({title:"–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),e("updated"),e("close")}catch(s){h.fire({title:"–û—à–∏–±–∫–∞",text:s.message||"–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è",icon:"error",confirmButtonText:"–û–ö"})}finally{a.value=!1}},formatDate:s=>new Date(s).toLocaleString("ru-RU")}}},$={class:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4"},ee={class:"bg-background border border-border rounded-lg shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto"},te={class:"sticky top-0 bg-background border-b border-border p-6"},oe={class:"flex items-center justify-between"},se={class:"text-lg font-semibold"},re={class:"p-6 space-y-6"},le={key:0},ne={class:"bg-muted/30 rounded-lg p-4"},de={class:"text-sm"},ae={key:0,class:"text-sm"},ie={key:1,class:"text-sm"},ue={class:"space-y-3"},me={class:"text-sm"},be={class:"text-sm"},ce={key:0},fe={class:"text-sm whitespace-pre-wrap"},ge={class:"text-sm"},xe={class:"flex gap-2 pt-4 border-t border-border"},pe=["disabled"];function ve(d,e,a,o,u,_){return l(),n("div",$,[t("div",ee,[t("div",te,[t("div",oe,[t("h3",se,"–î–µ—Ç–∞–ª–∏ –∑–∞—è–≤–∫–∏ #"+i(a.consultation.id),1),t("button",{onClick:e[0]||(e[0]=s=>d.$emit("close")),class:"text-muted-foreground hover:text-foreground"}," ‚úï ")])]),t("div",re,[a.consultation.user?(l(),n("div",le,[e[5]||(e[5]=t("h4",{class:"text-sm font-medium text-muted-foreground mb-2"},"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å",-1)),t("div",ne,[t("p",de,"ID: "+i(a.consultation.user.telegram_user_id),1),a.consultation.user.username?(l(),n("p",ae,"@"+i(a.consultation.user.username),1)):f("",!0),a.consultation.user.first_name?(l(),n("p",ie,i(a.consultation.user.first_name)+" "+i(a.consultation.user.last_name||""),1)):f("",!0)])])):f("",!0),t("div",null,[e[13]||(e[13]=t("h4",{class:"text-sm font-medium text-muted-foreground mb-2"},"–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞—è–≤–∫–µ",-1)),t("div",ue,[t("div",null,[e[6]||(e[6]=t("label",{class:"block text-xs text-muted-foreground mb-1"},"–ò–º—è",-1)),t("p",me,i(a.consultation.name),1)]),t("div",null,[e[7]||(e[7]=t("label",{class:"block text-xs text-muted-foreground mb-1"},"–¢–µ–ª–µ—Ñ–æ–Ω",-1)),t("p",be,i(a.consultation.phone),1)]),a.consultation.description?(l(),n("div",ce,[e[8]||(e[8]=t("label",{class:"block text-xs text-muted-foreground mb-1"},"–û–ø–∏—Å–∞–Ω–∏–µ",-1)),t("p",fe,i(a.consultation.description),1)])):f("",!0),t("div",null,[e[10]||(e[10]=t("label",{class:"block text-xs text-muted-foreground mb-1"},"–°—Ç–∞—Ç—É—Å",-1)),m(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.form.status=s),class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},[...e[9]||(e[9]=[t("option",{value:"new"},"–ù–æ–≤–∞—è",-1),t("option",{value:"in_progress"},"–í —Ä–∞–±–æ—Ç–µ",-1),t("option",{value:"closed"},"–ó–∞–∫—Ä—ã—Ç–∞",-1)])],512),[[P,o.form.status]])]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-xs text-muted-foreground mb-1"},"–ü—Ä–∏–º–µ—á–∞–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞",-1)),m(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=s=>o.form.admin_notes=s),rows:"4",class:"w-full px-3 py-2 border border-border rounded-lg bg-background resize-none",placeholder:"–í–≤–µ–¥–∏—Ç–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è..."},null,512),[[g,o.form.admin_notes]])]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-xs text-muted-foreground mb-1"},"–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è",-1)),t("p",ge,i(o.formatDate(a.consultation.created_at)),1)])])]),t("div",xe,[t("button",{onClick:e[3]||(e[3]=s=>d.$emit("close")),class:"flex-1 h-10 px-4 border border-border bg-background/50 hover:bg-accent/10 rounded-lg"}," –û—Ç–º–µ–Ω–∞ "),t("button",{onClick:e[4]||(e[4]=(...s)=>o.saveConsultation&&o.saveConsultation(...s)),disabled:o.saving,class:"flex-1 h-10 px-4 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-lg disabled:opacity-50"},i(o.saving?"–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...":"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"),9,pe)])])])])}const _e=T(Z,[["render",ve]]),ye={name:"ConsultationTable",components:{ConsultationDetail:_e},props:{botId:{type:[String,Number],required:!0}},setup(d){const e=c(!1),a=c([]),o=c(null),u=c(1),_=c(20),s=c(0),r=c({status:"",date_from:"",date_to:""}),v=async()=>{e.value=!0;try{const C={page:u.value,per_page:_.value,...r.value},x=await S(`/bot-management/${d.botId}/consultations`,C);if(!x.ok)throw new Error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞—è–≤–æ–∫");const k=await x.json();a.value=k.data.consultations||[],s.value=k.data.total||0}catch(C){console.error("Error fetching consultations:",C)}finally{e.value=!1}},w=()=>{r.value={status:"",date_from:"",date_to:""},u.value=1,v()},y=C=>{o.value=C},I=C=>({new:"–ù–æ–≤–∞—è",in_progress:"–í —Ä–∞–±–æ—Ç–µ",closed:"–ó–∞–∫—Ä—ã—Ç–∞"})[C]||C,p=C=>({new:"bg-blue-500/10 text-blue-500",in_progress:"bg-yellow-500/10 text-yellow-500",closed:"bg-green-500/10 text-green-500"})[C]||"bg-gray-500/10 text-gray-500",j=C=>new Date(C).toLocaleDateString("ru-RU",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});return N(u,()=>{v()}),q(()=>{v()}),{loading:e,consultations:a,selectedConsultation:o,currentPage:u,perPage:_,total:s,filters:r,fetchConsultations:v,resetFilters:w,showDetail:y,getStatusLabel:I,getStatusClass:p,formatDate:j}}},ke={class:"consultation-table space-y-4"},we={class:"bg-muted/30 rounded-lg border border-border p-4"},he={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Ce={class:"flex items-end"},Me={key:0,class:"text-center py-12"},Be={key:1,class:"bg-background rounded-lg border border-border overflow-hidden"},Ie={class:"overflow-x-auto"},Ue={class:"w-full"},Ve={class:"divide-y divide-border"},Se={class:"px-6 py-4 text-sm"},Te={class:"px-6 py-4 text-sm"},qe={class:"px-6 py-4 text-sm"},je={class:"px-6 py-4"},Ee={class:"px-6 py-4 text-sm"},De={class:"px-6 py-4 text-right"},Fe=["onClick"],Pe={key:0,class:"px-6 py-4 border-t border-border flex items-center justify-between"},ze={class:"text-sm text-muted-foreground"},Ae={class:"flex gap-2"},Ne=["disabled"],Le=["disabled"];function Re(d,e,a,o,u,_){const s=D("ConsultationDetail");return l(),n("div",ke,[e[16]||(e[16]=t("div",{class:"flex items-center justify-between"},[t("h2",{class:"text-2xl font-semibold"},"–ó–∞—è–≤–∫–∏ –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é")],-1)),t("div",we,[t("div",he,[t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium mb-2"},"–°—Ç–∞—Ç—É—Å",-1)),m(t("select",{"onUpdate:modelValue":e[0]||(e[0]=r=>o.filters.status=r),onChange:e[1]||(e[1]=(...r)=>o.fetchConsultations&&o.fetchConsultations(...r)),class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},[...e[10]||(e[10]=[t("option",{value:""},"–í—Å–µ",-1),t("option",{value:"new"},"–ù–æ–≤—ã–µ",-1),t("option",{value:"in_progress"},"–í —Ä–∞–±–æ—Ç–µ",-1),t("option",{value:"closed"},"–ó–∞–∫—Ä—ã—Ç—ã–µ",-1)])],544),[[P,o.filters.status]])]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium mb-2"},"–î–∞—Ç–∞ –æ—Ç",-1)),m(t("input",{"onUpdate:modelValue":e[2]||(e[2]=r=>o.filters.date_from=r),type:"date",onChange:e[3]||(e[3]=(...r)=>o.fetchConsultations&&o.fetchConsultations(...r)),class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,544),[[g,o.filters.date_from]])]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium mb-2"},"–î–∞—Ç–∞ –¥–æ",-1)),m(t("input",{"onUpdate:modelValue":e[4]||(e[4]=r=>o.filters.date_to=r),type:"date",onChange:e[5]||(e[5]=(...r)=>o.fetchConsultations&&o.fetchConsultations(...r)),class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,544),[[g,o.filters.date_to]])]),t("div",Ce,[t("button",{onClick:e[6]||(e[6]=(...r)=>o.resetFilters&&o.resetFilters(...r)),class:"w-full h-10 px-4 border border-border bg-background hover:bg-muted/10 rounded-lg"}," –°–±—Ä–æ—Å–∏—Ç—å ")])])]),o.loading?(l(),n("div",Me,[...e[14]||(e[14]=[t("p",{class:"text-muted-foreground"},"–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞—è–≤–æ–∫...",-1)])])):f("",!0),o.loading?f("",!0):(l(),n("div",Be,[t("div",Ie,[t("table",Ue,[e[15]||(e[15]=t("thead",{class:"bg-muted/30 border-b border-border"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"ID"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"–ò–º—è"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"–¢–µ–ª–µ—Ñ–æ–Ω"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"–°—Ç–∞—Ç—É—Å"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"–î–∞—Ç–∞"),t("th",{class:"px-6 py-3 text-right text-xs font-medium uppercase"},"–î–µ–π—Å—Ç–≤–∏—è")])],-1)),t("tbody",Ve,[(l(!0),n(U,null,V(o.consultations,r=>(l(),n("tr",{key:r.id,class:"hover:bg-muted/10"},[t("td",Se,i(r.id),1),t("td",Te,i(r.name),1),t("td",qe,i(r.phone),1),t("td",je,[t("span",{class:z(["px-2 py-1 text-xs rounded-md",o.getStatusClass(r.status)])},i(o.getStatusLabel(r.status)),3)]),t("td",Ee,i(o.formatDate(r.created_at)),1),t("td",De,[t("button",{onClick:v=>o.showDetail(r),class:"px-3 py-1 text-xs bg-blue-500 hover:bg-blue-600 text-white rounded"}," –î–µ—Ç–∞–ª–∏ ",8,Fe)])]))),128))])])]),o.total>o.perPage?(l(),n("div",Pe,[t("div",ze," –ü–æ–∫–∞–∑–∞–Ω–æ "+i((o.currentPage-1)*o.perPage+1)+" - "+i(Math.min(o.currentPage*o.perPage,o.total))+" –∏–∑ "+i(o.total),1),t("div",Ae,[t("button",{onClick:e[7]||(e[7]=r=>o.currentPage--),disabled:o.currentPage===1,class:"px-4 py-2 border border-border rounded-lg disabled:opacity-50"}," –ù–∞–∑–∞–¥ ",8,Ne),t("button",{onClick:e[8]||(e[8]=r=>o.currentPage++),disabled:o.currentPage*o.perPage>=o.total,class:"px-4 py-2 border border-border rounded-lg disabled:opacity-50"}," –í–ø–µ—Ä–µ–¥ ",8,Le)])])):f("",!0)])),o.selectedConsultation?(l(),W(s,{key:2,consultation:o.selectedConsultation,"bot-id":a.botId,onClose:e[9]||(e[9]=r=>o.selectedConsultation=null),onUpdated:o.fetchConsultations},null,8,["consultation","bot-id","onUpdated"])):f("",!0)])}const Ge=T(ye,[["render",Re]]),Oe={name:"MaterialForm",props:{botId:{type:[String,Number],required:!0},categoryId:{type:[String,Number],default:null},material:{type:Object,default:null}},emits:["close","saved"],setup(d,{emit:e}){const a=c(!1),o=c(!1),u=c(!1),_=c(""),s=c([]),r=c(null),v=c(null),w=c(null),y=c(!!d.material),I=c([]),p=c({title:"",category_id:d.categoryId||null,description:"",file_type:"file",file_url:"",file_id:"",media_id:null,order_index:0,is_active:!0}),j=async()=>{try{const b=await S(`/bot-management/${d.botId}/materials/categories`);if(b.ok){const M=await b.json();I.value=M.data||[]}}catch(b){console.error("Error fetching categories:",b)}},C=async()=>{o.value=!0;try{const b={};_.value&&(b.search=_.value);const M=await S("/media",b);if(M.ok){const E=await M.json();s.value=E.data||[]}}catch(b){console.error("Error fetching media:",b)}finally{o.value=!1}},x=()=>{p.value.file_url="",p.value.file_id="",p.value.media_id=null,r.value=null,v.value=null},k=b=>{const M=b.target.files[0];M&&(r.value=M,p.value.media_id=null,v.value=null)},B=b=>{p.value.media_id=b.id,v.value=b,r.value=null},Q=()=>{p.value.media_id&&(u.value=!1)},H=b=>{if(!b)return"0 B";const M=1024,E=["B","KB","MB","GB"],L=Math.floor(Math.log(b)/Math.log(M));return Math.round(b/Math.pow(M,L)*100)/100+" "+E[L]},J=async()=>{a.value=!0;try{const b=new FormData;if(b.append("title",p.value.title),b.append("category_id",p.value.category_id),b.append("description",p.value.description||""),b.append("file_type",p.value.file_type),b.append("order_index",p.value.order_index||0),b.append("is_active",p.value.is_active?1:0),p.value.file_type==="file")if(r.value)b.append("file",r.value);else if(p.value.media_id)b.append("media_id",p.value.media_id);else throw new Error("–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª –∏–ª–∏ —É–∫–∞–∑–∞—Ç—å —Ñ–∞–π–ª –∏–∑ –º–µ–¥–∏–∞-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏");else p.value.file_type==="url"?b.append("file_url",p.value.file_url):p.value.file_type==="telegram_file_id"&&b.append("file_id",p.value.file_id);let M;if(y.value?M=await A(`/bot-management/${d.botId}/materials/${d.material.id}`,b):M=await K(`/bot-management/${d.botId}/materials`,b),!M.ok){const E=await M.json().catch(()=>({}));throw new Error(E.message||"–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–∞")}await h.fire({title:"–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),e("saved"),e("close")}catch(b){h.fire({title:"–û—à–∏–±–∫–∞",text:b.message||"–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–∞",icon:"error",confirmButtonText:"–û–ö"})}finally{a.value=!1}};return d.material&&(p.value={title:d.material.title||"",category_id:d.material.category_id||d.categoryId||null,description:d.material.description||"",file_type:d.material.file_type||"file",file_url:d.material.file_url||"",file_id:d.material.file_id||"",media_id:d.material.media_id||null,order_index:d.material.order_index||0,is_active:d.material.is_active!==void 0?d.material.is_active:!0},d.material.media&&(v.value=d.material.media)),N(u,b=>{b&&C()}),N(_,()=>{u.value&&C()}),q(()=>{j()}),{saving:a,loadingMedia:o,showMediaPicker:u,mediaSearch:_,mediaFiles:s,selectedFile:r,selectedMedia:v,fileInput:w,isEditMode:y,categories:I,form:p,fetchMediaFiles:C,handleFileTypeChange:x,handleFileSelect:k,selectMedia:B,confirmMediaSelection:Q,formatFileSize:H,saveMaterial:J}}},Ke={class:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4"},Qe={class:"bg-background border border-border rounded-lg shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto"},He={class:"sticky top-0 bg-background border-b border-border p-6"},Je={class:"flex items-center justify-between"},We={class:"text-lg font-semibold"},Xe=["value"],Ye={key:0},Ze={class:"space-y-3"},$e={key:0,class:"text-xs text-muted-foreground mt-1"},et={key:0,class:"text-xs text-muted-foreground mt-1"},tt={key:1},ot={key:2},st={class:"flex items-center gap-2"},rt={class:"flex gap-4 pt-4 border-t border-border"},lt=["disabled"],nt={key:0,class:"fixed inset-0 z-[60] flex items-center justify-center bg-black/90 p-4"},dt={class:"bg-background border border-border rounded-lg shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col"},at={class:"p-6 border-b border-border"},it={class:"flex items-center justify-between"},ut={class:"flex-1 overflow-y-auto p-6"},mt={key:0,class:"text-center py-12"},bt={key:1,class:"text-center py-12 text-muted-foreground"},ct={key:2,class:"grid grid-cols-2 md:grid-cols-4 gap-4"},ft=["onClick"],gt={class:"text-sm font-medium truncate"},xt={class:"text-xs text-muted-foreground mt-1"},pt={class:"p-6 border-t border-border"},vt=["disabled"];function _t(d,e,a,o,u,_){return l(),n("div",Ke,[t("div",Qe,[t("div",He,[t("div",Je,[t("h3",We,i(o.isEditMode?"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª":"–°–æ–∑–¥–∞—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª"),1),t("button",{onClick:e[0]||(e[0]=s=>d.$emit("close")),class:"text-muted-foreground hover:text-foreground"}," ‚úï ")])]),t("form",{onSubmit:e[13]||(e[13]=G((...s)=>o.saveMaterial&&o.saveMaterial(...s),["prevent"])),class:"p-6 space-y-6"},[t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium mb-2"},"–ù–∞–∑–≤–∞–Ω–∏–µ *",-1)),m(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.form.title=s),type:"text",required:"",placeholder:"–ù–∞–∑–≤–∞–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∞",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[g,o.form.title]])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium mb-2"},"–ö–∞—Ç–µ–≥–æ—Ä–∏—è *",-1)),m(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>o.form.category_id=s),required:"",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},[e[18]||(e[18]=t("option",{value:""},"–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é",-1)),(l(!0),n(U,null,V(o.categories,s=>(l(),n("option",{key:s.id,value:s.id},i(s.name),9,Xe))),128))],512),[[P,o.form.category_id,void 0,{number:!0}]])]),t("div",null,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium mb-2"},"–û–ø–∏—Å–∞–Ω–∏–µ",-1)),m(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=s=>o.form.description=s),rows:"4",placeholder:"–û–ø–∏—Å–∞–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∞...",class:"w-full px-3 py-2 border border-border rounded-lg bg-background resize-none"},null,512),[[g,o.form.description]])]),t("div",null,[e[22]||(e[22]=t("label",{class:"block text-sm font-medium mb-2"},"–¢–∏–ø —Ñ–∞–π–ª–∞ *",-1)),m(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>o.form.file_type=s),required:"",onChange:e[5]||(e[5]=(...s)=>o.handleFileTypeChange&&o.handleFileTypeChange(...s)),class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},[...e[21]||(e[21]=[t("option",{value:"file"},"–§–∞–π–ª (–∑–∞–≥—Ä—É–∑–∫–∞ –∏–ª–∏ –∏–∑ –º–µ–¥–∏–∞-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏)",-1),t("option",{value:"url"},"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",-1),t("option",{value:"telegram_file_id"},"Telegram file_id",-1)])],544),[[P,o.form.file_type]])]),o.form.file_type==="file"?(l(),n("div",Ye,[e[26]||(e[26]=t("label",{class:"block text-sm font-medium mb-2"},"–§–∞–π–ª",-1)),t("div",Ze,[t("div",null,[e[23]||(e[23]=t("label",{class:"block text-xs text-muted-foreground mb-2"}," –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤—ã–π —Ñ–∞–π–ª ",-1)),t("input",{ref:"fileInput",type:"file",onChange:e[6]||(e[6]=(...s)=>o.handleFileSelect&&o.handleFileSelect(...s)),class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,544),o.selectedFile?(l(),n("p",$e," –í—ã–±—Ä–∞–Ω: "+i(o.selectedFile.name),1)):f("",!0)]),e[25]||(e[25]=t("div",{class:"text-center text-sm text-muted-foreground"},"–∏–ª–∏",-1)),t("div",null,[e[24]||(e[24]=t("label",{class:"block text-xs text-muted-foreground mb-2"}," –í—ã–±—Ä–∞—Ç—å –∏–∑ –º–µ–¥–∏–∞-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏ ",-1)),t("button",{type:"button",onClick:e[7]||(e[7]=s=>o.showMediaPicker=!0),class:"w-full h-10 px-4 border border-border rounded-lg bg-background hover:bg-muted/10"},i(o.form.media_id?"–§–∞–π–ª –≤—ã–±—Ä–∞–Ω":"–í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª"),1),o.selectedMedia?(l(),n("p",et," –í—ã–±—Ä–∞–Ω: "+i(o.selectedMedia.name),1)):f("",!0)])])])):f("",!0),o.form.file_type==="url"?(l(),n("div",tt,[e[27]||(e[27]=t("label",{class:"block text-sm font-medium mb-2"},"URL *",-1)),m(t("input",{"onUpdate:modelValue":e[8]||(e[8]=s=>o.form.file_url=s),type:"url",required:"",placeholder:"https://example.com/file.pdf",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[g,o.form.file_url]])])):f("",!0),o.form.file_type==="telegram_file_id"?(l(),n("div",ot,[e[28]||(e[28]=t("label",{class:"block text-sm font-medium mb-2"},"Telegram file_id *",-1)),m(t("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>o.form.file_id=s),type:"text",required:"",placeholder:"BQACAgIAAxkBAAI...",class:"w-full h-10 px-3 border border-border rounded-lg bg-background font-mono text-sm"},null,512),[[g,o.form.file_id]]),e[29]||(e[29]=t("p",{class:"text-xs text-muted-foreground mt-1"}," –ü–æ–ª—É—á–∏—Ç—å file_id –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏–≤ —Ñ–∞–π–ª –±–æ—Ç—É –∏ –ø—Ä–æ–≤–µ—Ä–∏–≤ –æ—Ç–≤–µ—Ç API ",-1))])):f("",!0),t("div",null,[e[30]||(e[30]=t("label",{class:"block text-sm font-medium mb-2"},"–ü–æ—Ä—è–¥–æ–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è",-1)),m(t("input",{"onUpdate:modelValue":e[10]||(e[10]=s=>o.form.order_index=s),type:"number",min:"0",placeholder:"0",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[g,o.form.order_index,void 0,{number:!0}]])]),t("div",null,[t("label",st,[m(t("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>o.form.is_active=s),type:"checkbox",class:"w-4 h-4"},null,512),[[O,o.form.is_active]]),e[31]||(e[31]=t("span",null,"–ú–∞—Ç–µ—Ä–∏–∞–ª –∞–∫—Ç–∏–≤–µ–Ω",-1))])]),t("div",rt,[t("button",{type:"button",onClick:e[12]||(e[12]=s=>d.$emit("close")),class:"flex-1 h-10 px-4 border border-border bg-background/50 hover:bg-accent/10 rounded-lg"}," –û—Ç–º–µ–Ω–∞ "),t("button",{type:"submit",disabled:o.saving,class:"flex-1 h-10 px-4 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-lg disabled:opacity-50"},i(o.saving?"–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...":"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"),9,lt)])],32),o.showMediaPicker?(l(),n("div",nt,[t("div",dt,[t("div",at,[t("div",it,[e[32]||(e[32]=t("h3",{class:"text-lg font-semibold"},"–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª –∏–∑ –º–µ–¥–∏–∞-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏",-1)),t("button",{onClick:e[14]||(e[14]=s=>o.showMediaPicker=!1),class:"text-muted-foreground hover:text-foreground"}," ‚úï ")]),m(t("input",{"onUpdate:modelValue":e[15]||(e[15]=s=>o.mediaSearch=s),type:"text",placeholder:"–ü–æ–∏—Å–∫ —Ñ–∞–π–ª–∞...",class:"w-full mt-4 h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[g,o.mediaSearch]])]),t("div",ut,[o.loadingMedia?(l(),n("div",mt,[...e[33]||(e[33]=[t("p",{class:"text-muted-foreground"},"–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤...",-1)])])):o.mediaFiles.length===0?(l(),n("div",bt," –§–∞–π–ª—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã ")):(l(),n("div",ct,[(l(!0),n(U,null,V(o.mediaFiles,s=>(l(),n("div",{key:s.id,onClick:r=>o.selectMedia(s),class:z(["p-4 border rounded-lg cursor-pointer transition-colors",o.form.media_id===s.id?"border-accent bg-accent/10":"border-border hover:bg-muted/10"])},[t("div",gt,i(s.name),1),t("div",xt,i(o.formatFileSize(s.size)),1)],10,ft))),128))]))]),t("div",pt,[t("button",{onClick:e[16]||(e[16]=(...s)=>o.confirmMediaSelection&&o.confirmMediaSelection(...s)),disabled:!o.form.media_id,class:"w-full h-10 px-4 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-lg disabled:opacity-50"}," –í—ã–±—Ä–∞—Ç—å ",8,vt)])])])):f("",!0)])])}const yt=T(Oe,[["render",_t]]),kt={name:"MaterialCategoryTree",components:{MaterialForm:yt},props:{botId:{type:[String,Number],required:!0}},setup(d){const e=c(!1),a=c([]),o=c(!1),u=c(!1),_=c(null),s=c(null),r=async()=>{e.value=!0;try{const x=await S(`/bot-management/${d.botId}/materials/categories`);if(!x.ok)throw new Error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π");const k=await x.json();a.value=k.data||[];for(const B of a.value)await w(B)}catch(x){console.error("Error fetching categories:",x)}finally{e.value=!1}},v=async()=>{const{value:x}=await h.fire({title:"–°–æ–∑–¥–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é",html:`
                    <input id="swal-name" class="swal2-input" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ" required>
                    <textarea id="swal-description" class="swal2-textarea" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ"></textarea>
                    <input id="swal-order" class="swal2-input" type="number" placeholder="–ü–æ—Ä—è–¥–æ–∫" value="0">
                `,focusConfirm:!1,showCancelButton:!0,confirmButtonText:"–°–æ–∑–¥–∞—Ç—å",cancelButtonText:"–û—Ç–º–µ–Ω–∞",preConfirm:()=>{const k=document.getElementById("swal-name").value;return k?{name:k,description:document.getElementById("swal-description").value,order_index:parseInt(document.getElementById("swal-order").value)||0}:(h.showValidationMessage("–ù–∞–∑–≤–∞–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ"),!1)}});if(x)try{if(!(await K(`/bot-management/${d.botId}/materials/categories`,x)).ok)throw new Error("–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏");await h.fire({title:"–°–æ–∑–¥–∞–Ω–æ",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),r(),o.value=!1}catch(k){h.fire({title:"–û—à–∏–±–∫–∞",text:k.message||"–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏",icon:"error"})}},w=async x=>{try{const k=await S(`/bot-management/${d.botId}/materials`,{category_id:x.id});if(k.ok){const B=await k.json();x.materials=B.data||[]}}catch(k){console.error("Error fetching materials:",k)}},y=async x=>{if((await h.fire({title:"–£–¥–∞–ª–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é?",text:`–ö–∞—Ç–µ–≥–æ—Ä–∏—è "${x.name}" –∏ –≤—Å–µ –µ—ë –º–∞—Ç–µ—Ä–∏–∞–ª—ã –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã.`,icon:"warning",showCancelButton:!0,confirmButtonText:"–£–¥–∞–ª–∏—Ç—å",cancelButtonText:"–û—Ç–º–µ–Ω–∞"})).isConfirmed)try{if(!(await R(`/bot-management/${d.botId}/materials/categories/${x.id}`)).ok)throw new Error("–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏");await h.fire({title:"–£–¥–∞–ª–µ–Ω–æ",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),r()}catch(B){h.fire({title:"–û—à–∏–±–∫–∞",text:B.message||"–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏",icon:"error"})}},I=async x=>{if((await h.fire({title:"–£–¥–∞–ª–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª?",text:`–ú–∞—Ç–µ—Ä–∏–∞–ª "${x.title}" –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω.`,icon:"warning",showCancelButton:!0,confirmButtonText:"–£–¥–∞–ª–∏—Ç—å",cancelButtonText:"–û—Ç–º–µ–Ω–∞"})).isConfirmed)try{if(!(await R(`/bot-management/${d.botId}/materials/${x.id}`)).ok)throw new Error("–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–∞");await h.fire({title:"–£–¥–∞–ª–µ–Ω–æ",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),r()}catch(B){h.fire({title:"–û—à–∏–±–∫–∞",text:B.message||"–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–∞",icon:"error"})}},p=async x=>{const{value:k}=await h.fire({title:"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é",html:`
                    <input id="swal-name" class="swal2-input" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ" value="${x.name}">
                    <textarea id="swal-description" class="swal2-textarea" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ">${x.description||""}</textarea>
                    <input id="swal-order" class="swal2-input" type="number" placeholder="–ü–æ—Ä—è–¥–æ–∫" value="${x.order_index}">
                `,focusConfirm:!1,showCancelButton:!0,confirmButtonText:"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å",cancelButtonText:"–û—Ç–º–µ–Ω–∞",preConfirm:()=>({name:document.getElementById("swal-name").value,description:document.getElementById("swal-description").value,order_index:parseInt(document.getElementById("swal-order").value)||0})});if(k)try{if(!(await A(`/bot-management/${d.botId}/materials/categories/${x.id}`,k)).ok)throw new Error("–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏");await h.fire({title:"–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),r()}catch(B){h.fire({title:"–û—à–∏–±–∫–∞",text:B.message||"–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏",icon:"error"})}},j=x=>{s.value=x,u.value=!0},C=x=>{_.value=x,s.value=null,u.value=!0};return q(()=>{r()}),{loading:e,categories:a,showCategoryModal:o,showMaterialForm:u,selectedCategory:_,selectedMaterial:s,fetchCategories:r,createCategory:v,deleteCategory:y,deleteMaterial:I,editCategory:p,editMaterial:j,showMaterialModal:C}}},wt={class:"material-category-tree space-y-4"},ht={class:"flex items-center justify-between"},Ct={key:0,class:"text-center py-12"},Mt={key:1,class:"space-y-4"},Bt={class:"flex items-center justify-between mb-4"},It={class:"text-lg font-semibold"},Ut={key:0,class:"text-sm text-muted-foreground mt-1"},Vt={class:"flex gap-2"},St=["onClick"],Tt=["onClick"],qt=["onClick"],jt={key:0,class:"space-y-2"},Et={class:"font-medium"},Dt={key:0,class:"text-sm text-muted-foreground"},Ft={class:"text-xs text-muted-foreground"},Pt={class:"flex gap-2"},zt=["onClick"],At=["onClick"],Nt={key:1,class:"text-sm text-muted-foreground p-3"},Lt={key:0,class:"text-center py-12 text-muted-foreground"},Rt={key:2,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4"},Gt={class:"bg-background border border-border rounded-lg shadow-2xl w-full max-w-md"},Ot={class:"p-6"};function Kt(d,e,a,o,u,_){return l(),n("div",wt,[t("div",ht,[e[3]||(e[3]=t("h2",{class:"text-2xl font-semibold"},"–ú–∞—Ç–µ—Ä–∏–∞–ª—ã",-1)),t("button",{onClick:e[0]||(e[0]=s=>o.showCategoryModal=!0),class:"h-11 px-6 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-2xl"}," + –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é ")]),o.loading?(l(),n("div",Ct,[...e[4]||(e[4]=[t("p",{class:"text-muted-foreground"},"–ó–∞–≥—Ä—É–∑–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤...",-1)])])):f("",!0),o.loading?f("",!0):(l(),n("div",Mt,[(l(!0),n(U,null,V(o.categories,s=>(l(),n("div",{key:s.id,class:"bg-card rounded-lg border border-border p-4"},[t("div",Bt,[t("div",null,[t("h3",It,i(s.name),1),s.description?(l(),n("p",Ut,i(s.description),1)):f("",!0)]),t("div",Vt,[t("button",{onClick:r=>o.editCategory(s),class:"px-3 py-1 text-xs bg-yellow-500 hover:bg-yellow-600 text-white rounded"}," –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å ",8,St),t("button",{onClick:r=>o.deleteCategory(s),class:"px-3 py-1 text-xs bg-red-500 hover:bg-red-600 text-white rounded"}," –£–¥–∞–ª–∏—Ç—å ",8,Tt),t("button",{onClick:r=>o.showMaterialModal(s),class:"px-3 py-1 text-xs bg-green-500 hover:bg-green-600 text-white rounded"}," + –ú–∞—Ç–µ—Ä–∏–∞–ª ",8,qt)])]),s.materials&&s.materials.length>0?(l(),n("div",jt,[(l(!0),n(U,null,V(s.materials,r=>(l(),n("div",{key:r.id,class:"flex items-center justify-between p-3 bg-muted/30 rounded-lg"},[t("div",null,[t("p",Et,i(r.title),1),r.description?(l(),n("p",Dt,i(r.description),1)):f("",!0),t("p",Ft," –°–∫–∞—á–∏–≤–∞–Ω–∏–π: "+i(r.download_count||0),1)]),t("div",Pt,[t("button",{onClick:v=>o.editMaterial(r),class:"px-3 py-1 text-xs bg-blue-500 hover:bg-blue-600 text-white rounded"}," –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å ",8,zt),t("button",{onClick:v=>o.deleteMaterial(r),class:"px-3 py-1 text-xs bg-red-500 hover:bg-red-600 text-white rounded"}," –£–¥–∞–ª–∏—Ç—å ",8,At)])]))),128))])):(l(),n("div",Nt," –ù–µ—Ç –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ "))]))),128)),o.categories.length===0?(l(),n("div",Lt," –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é. ")):f("",!0)])),o.showCategoryModal?(l(),n("div",Rt,[t("div",Gt,[t("div",Ot,[e[5]||(e[5]=t("h3",{class:"text-lg font-semibold mb-4"},"–°–æ–∑–¥–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é",-1)),t("button",{onClick:e[1]||(e[1]=(...s)=>o.createCategory&&o.createCategory(...s)),class:"w-full h-10 px-4 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-lg"}," –û—Ç–∫—Ä—ã—Ç—å —Ñ–æ—Ä–º—É —Å–æ–∑–¥–∞–Ω–∏—è "),t("button",{onClick:e[2]||(e[2]=s=>o.showCategoryModal=!1),class:"w-full mt-2 h-10 px-4 border border-border bg-background/50 hover:bg-accent/10 rounded-lg"}," –û—Ç–º–µ–Ω–∞ ")])])])):f("",!0)])}const Qt=T(kt,[["render",Kt]]),Ht={name:"BotSettingsForm",props:{botId:{type:[String,Number],required:!0}},emits:["updated"],setup(d,{emit:e}){const a=c(!1),o=c(!1),u=c({required_channel_id:null,required_channel_username:"",admin_telegram_ids:[],yandex_maps_url:"",welcome_message:"",other_settings:{phone_validation_strict:!1,max_description_length:1e3,subscription_check_timeout:5}}),_=async()=>{a.value=!0;try{const w=await S(`/bot-management/${d.botId}/settings`);if(!w.ok)throw new Error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫");const y=await w.json();if(y.success&&y.data){const I=y.data.settings||{},p=I.messages||{};u.value={required_channel_id:y.data.required_channel_id||null,required_channel_username:y.data.required_channel_username||"",admin_telegram_ids:y.data.admin_telegram_ids||[],yandex_maps_url:y.data.yandex_maps_url||"",welcome_message:y.data.welcome_message||"",messages:{subscription:p.subscription||{required_text:"",subscribe_button:"",check_button:""},consultation:p.consultation||{description:"",form_name_label:"",form_phone_label:"",form_description_label:"",thank_you:"",start_button:"",skip_description_button:""},materials:p.materials||{list_description:"",download_button:"",back_to_list:""},menu:p.menu||{materials_button:"",consultation_button:"",review_button:"",back_to_menu:""},notifications:p.notifications||{consultation_template:""}},other_settings:I.other_settings||{phone_validation_strict:!1,max_description_length:1e3,subscription_check_timeout:5}}}}catch(w){console.error("Error fetching settings:",w)}finally{a.value=!1}},s=async()=>{o.value=!0;try{const w=await A(`/bot-management/${d.botId}/settings`,{required_channel_id:u.value.required_channel_id,required_channel_username:u.value.required_channel_username,admin_telegram_ids:u.value.admin_telegram_ids,yandex_maps_url:u.value.yandex_maps_url,welcome_message:u.value.welcome_message,settings:{messages:u.value.messages,other_settings:u.value.other_settings}});if(!w.ok){const y=await w.json().catch(()=>({}));throw new Error(y.message||"–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫")}await h.fire({title:"–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),e("updated")}catch(w){h.fire({title:"–û—à–∏–±–∫–∞",text:w.message||"–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫",icon:"error",confirmButtonText:"–û–ö"})}finally{o.value=!1}},r=()=>{u.value.admin_telegram_ids.push(null)},v=w=>{u.value.admin_telegram_ids.splice(w,1)};return q(()=>{_()}),{loading:a,saving:o,activeTab,tabs,form:u,fetchSettings:_,saveSettings:s,addAdmin:r,removeAdmin:v}}},Jt={class:"bot-settings-form space-y-6"},Wt={class:"border-b border-border"},Xt={class:"flex -mb-px"},Yt=["onClick"],Zt={key:0,class:"bg-card rounded-lg border border-border p-6 space-y-4"},$t={class:"space-y-2"},eo=["onUpdate:modelValue"],to=["onClick"],oo={key:1,class:"bg-card rounded-lg border border-border p-6 space-y-6"},so={class:"space-y-4"},ro={class:"space-y-4 pt-4 border-t border-border"},lo={class:"space-y-4 pt-4 border-t border-border"},no={class:"space-y-4 pt-4 border-t border-border"},ao={class:"space-y-4 pt-4 border-t border-border"},io={key:2,class:"bg-card rounded-lg border border-border p-6 space-y-4"},uo={class:"flex items-center gap-2"},mo={class:"flex gap-4"},bo=["disabled"];function co(d,e,a,o,u,_){return l(),n("div",Jt,[e[64]||(e[64]=t("h2",{class:"text-2xl font-semibold"},"–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞",-1)),t("div",Wt,[t("nav",Xt,[(l(!0),n(U,null,V(o.tabs,s=>(l(),n("button",{key:s.key,onClick:r=>o.activeTab=s.key,class:z(["px-6 py-4 text-sm font-medium border-b-2 transition-colors",o.activeTab===s.key?"border-accent text-accent":"border-transparent text-muted-foreground hover:text-foreground hover:border-muted-foreground"])},i(s.label),11,Yt))),128))])]),t("form",{onSubmit:e[26]||(e[26]=G((...s)=>o.saveSettings&&o.saveSettings(...s),["prevent"])),class:"space-y-6"},[o.activeTab==="main"?(l(),n("div",Zt,[e[34]||(e[34]=t("h3",{class:"text-lg font-semibold"},"–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏",-1)),t("div",null,[e[27]||(e[27]=t("label",{class:"block text-sm font-medium mb-2"},"ID –∫–∞–Ω–∞–ª–∞",-1)),m(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>o.form.required_channel_id=s),type:"number",placeholder:"-1001234567890",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[g,o.form.required_channel_id,void 0,{number:!0}]]),e[28]||(e[28]=t("p",{class:"text-xs text-muted-foreground mt-1"}," ID –∫–∞–Ω–∞–ª–∞ (–º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —á–µ—Ä–µ–∑ –±–æ—Ç–∞ @userinfobot) ",-1))]),t("div",null,[e[29]||(e[29]=t("label",{class:"block text-sm font-medium mb-2"},"Username –∫–∞–Ω–∞–ª–∞",-1)),m(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.form.required_channel_username=s),type:"text",placeholder:"aip_channel",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[g,o.form.required_channel_username]]),e[30]||(e[30]=t("p",{class:"text-xs text-muted-foreground mt-1"}," Username –∫–∞–Ω–∞–ª–∞ –±–µ–∑ —Å–∏–º–≤–æ–ª–∞ @ ",-1))]),t("div",null,[e[31]||(e[31]=t("label",{class:"block text-sm font-medium mb-2"},"Telegram ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤",-1)),t("div",$t,[(l(!0),n(U,null,V(o.form.admin_telegram_ids,(s,r)=>(l(),n("div",{key:r,class:"flex gap-2"},[m(t("input",{"onUpdate:modelValue":v=>o.form.admin_telegram_ids[r]=v,type:"number",placeholder:"123456789",class:"flex-1 h-10 px-3 border border-border rounded-lg bg-background"},null,8,eo),[[g,o.form.admin_telegram_ids[r],void 0,{number:!0}]]),t("button",{type:"button",onClick:v=>o.removeAdmin(r),class:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg"}," –£–¥–∞–ª–∏—Ç—å ",8,to)]))),128)),t("button",{type:"button",onClick:e[2]||(e[2]=(...s)=>o.addAdmin&&o.addAdmin(...s)),class:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg"}," + –î–æ–±–∞–≤–∏—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ ")])]),t("div",null,[e[32]||(e[32]=t("label",{class:"block text-sm font-medium mb-2"},"–°—Å—ã–ª–∫–∞ –Ω–∞ –Ø–Ω–¥–µ–∫—Å –ö–∞—Ä—Ç—ã",-1)),m(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>o.form.yandex_maps_url=s),type:"url",placeholder:"https://yandex.ru/maps/org/...",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[g,o.form.yandex_maps_url]])]),t("div",null,[e[33]||(e[33]=t("label",{class:"block text-sm font-medium mb-2"},"–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ",-1)),m(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=s=>o.form.welcome_message=s),rows:"6",placeholder:"–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å...",class:"w-full px-3 py-2 border border-border rounded-lg bg-background resize-none"},null,512),[[g,o.form.welcome_message]])])])):f("",!0),o.activeTab==="messages"?(l(),n("div",oo,[e[59]||(e[59]=t("h3",{class:"text-lg font-semibold"},"–¢–µ–∫—Å—Ç—ã —Å–æ–æ–±—â–µ–Ω–∏–π –±–æ—Ç–∞",-1)),t("div",so,[e[38]||(e[38]=t("h4",{class:"text-md font-medium"},"–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∫–∞–Ω–∞–ª",-1)),t("div",null,[e[35]||(e[35]=t("label",{class:"block text-sm font-medium mb-2"},"–¢–µ–∫—Å—Ç —ç–∫—Ä–∞–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∏",-1)),m(t("textarea",{"onUpdate:modelValue":e[5]||(e[5]=s=>o.form.messages.subscription.required_text=s),rows:"3",placeholder:"–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –±–µ—Ç–∞-–≤–µ—Ä—Å–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è...",class:"w-full px-3 py-2 border border-border rounded-lg bg-background resize-none"},null,512),[[g,o.form.messages.subscription.required_text]])]),t("div",null,[e[36]||(e[36]=t("label",{class:"block text-sm font-medium mb-2"},"–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ –ø–æ–¥–ø–∏—Å–∫–∏",-1)),m(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>o.form.messages.subscription.subscribe_button=s),type:"text",placeholder:"üîî –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ Telegram",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[g,o.form.messages.subscription.subscribe_button]])]),t("div",null,[e[37]||(e[37]=t("label",{class:"block text-sm font-medium mb-2"},"–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏",-1)),m(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>o.form.messages.subscription.check_button=s),type:"text",placeholder:"‚úÖ –Ø –ø–æ–¥–ø–∏—Å–∞–ª—Å—è",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[g,o.form.messages.subscription.check_button]])])]),t("div",ro,[e[46]||(e[46]=t("h4",{class:"text-md font-medium"},"–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è",-1)),t("div",null,[e[39]||(e[39]=t("label",{class:"block text-sm font-medium mb-2"},"–û–ø–∏—Å–∞–Ω–∏–µ —É—Å–ª—É–≥–∏",-1)),m(t("textarea",{"onUpdate:modelValue":e[8]||(e[8]=s=>o.form.messages.consultation.description=s),rows:"4",placeholder:"–ï—Å–ª–∏ –≤–∞—à–µ–º—É –±–∏–∑–Ω–µ—Å—É –Ω—É–∂–Ω–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è...",class:"w-full px-3 py-2 border border-border rounded-lg bg-background resize-none"},null,512),[[g,o.form.messages.consultation.description]])]),t("div",null,[e[40]||(e[40]=t("label",{class:"block text-sm font-medium mb-2"},'–¢–µ–∫—Å—Ç –ø–æ–ª—è "–ò–º—è"',-1)),m(t("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>o.form.messages.consultation.form_name_label=s),type:"text",placeholder:"–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è:",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[g,o.form.messages.consultation.form_name_label]])]),t("div",null,[e[41]||(e[41]=t("label",{class:"block text-sm font-medium mb-2"},'–¢–µ–∫—Å—Ç –ø–æ–ª—è "–¢–µ–ª–µ—Ñ–æ–Ω"',-1)),m(t("input",{"onUpdate:modelValue":e[10]||(e[10]=s=>o.form.messages.consultation.form_phone_label=s),type:"text",placeholder:"–í–≤–µ–¥–∏—Ç–µ –≤–∞—à —Ç–µ–ª–µ—Ñ–æ–Ω:",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[g,o.form.messages.consultation.form_phone_label]])]),t("div",null,[e[42]||(e[42]=t("label",{class:"block text-sm font-medium mb-2"},'–¢–µ–∫—Å—Ç –ø–æ–ª—è "–û–ø–∏—Å–∞–Ω–∏–µ"',-1)),m(t("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>o.form.messages.consultation.form_description_label=s),type:"text",placeholder:"–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ...):",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[g,o.form.messages.consultation.form_description_label]])]),t("div",null,[e[43]||(e[43]=t("label",{class:"block text-sm font-medium mb-2"},"–°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏",-1)),m(t("textarea",{"onUpdate:modelValue":e[12]||(e[12]=s=>o.form.messages.consultation.thank_you=s),rows:"2",placeholder:"–°–ø–∞—Å–∏–±–æ. –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.",class:"w-full px-3 py-2 border border-border rounded-lg bg-background resize-none"},null,512),[[g,o.form.messages.consultation.thank_you]])]),t("div",null,[e[44]||(e[44]=t("label",{class:"block text-sm font-medium mb-2"},'–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ "–ó–∞–ø–∏—Å–∞—Ç—å—Å—è"',-1)),m(t("input",{"onUpdate:modelValue":e[13]||(e[13]=s=>o.form.messages.consultation.start_button=s),type:"text",placeholder:"üìù –ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[g,o.form.messages.consultation.start_button]])]),t("div",null,[e[45]||(e[45]=t("label",{class:"block text-sm font-medium mb-2"},'–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ "–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å"',-1)),m(t("input",{"onUpdate:modelValue":e[14]||(e[14]=s=>o.form.messages.consultation.skip_description_button=s),type:"text",placeholder:"–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[g,o.form.messages.consultation.skip_description_button]])])]),t("div",lo,[e[50]||(e[50]=t("h4",{class:"text-md font-medium"},"–ú–∞—Ç–µ—Ä–∏–∞–ª—ã",-1)),t("div",null,[e[47]||(e[47]=t("label",{class:"block text-sm font-medium mb-2"},"–û–ø–∏—Å–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤",-1)),m(t("textarea",{"onUpdate:modelValue":e[15]||(e[15]=s=>o.form.messages.materials.list_description=s),rows:"3",placeholder:"–ú—ã –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª–∏ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –ø–æ –∫–ª—é—á–µ–≤—ã–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º...",class:"w-full px-3 py-2 border border-border rounded-lg bg-background resize-none"},null,512),[[g,o.form.messages.materials.list_description]])]),t("div",null,[e[48]||(e[48]=t("label",{class:"block text-sm font-medium mb-2"},"–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è",-1)),m(t("input",{"onUpdate:modelValue":e[16]||(e[16]=s=>o.form.messages.materials.download_button=s),type:"text",placeholder:"‚¨áÔ∏è –°–∫–∞—á–∞—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—ã",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[g,o.form.messages.materials.download_button]])]),t("div",null,[e[49]||(e[49]=t("label",{class:"block text-sm font-medium mb-2"},'–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ "–ù–∞–∑–∞–¥"',-1)),m(t("input",{"onUpdate:modelValue":e[17]||(e[17]=s=>o.form.messages.materials.back_to_list=s),type:"text",placeholder:"‚¨ÖÔ∏è –ù–∞–∑–∞–¥",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[g,o.form.messages.materials.back_to_list]])])]),t("div",no,[e[55]||(e[55]=t("h4",{class:"text-md font-medium"},"–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é",-1)),t("div",null,[e[51]||(e[51]=t("label",{class:"block text-sm font-medium mb-2"},'–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ "–ú–∞—Ç–µ—Ä–∏–∞–ª—ã"',-1)),m(t("input",{"onUpdate:modelValue":e[18]||(e[18]=s=>o.form.messages.menu.materials_button=s),type:"text",placeholder:"üìÇ –ü–æ–ª–µ–∑–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –∏ –¥–æ–≥–æ–≤–æ—Ä—ã",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[g,o.form.messages.menu.materials_button]])]),t("div",null,[e[52]||(e[52]=t("label",{class:"block text-sm font-medium mb-2"},'–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ "–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è"',-1)),m(t("input",{"onUpdate:modelValue":e[19]||(e[19]=s=>o.form.messages.menu.consultation_button=s),type:"text",placeholder:"üìû –ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[g,o.form.messages.menu.consultation_button]])]),t("div",null,[e[53]||(e[53]=t("label",{class:"block text-sm font-medium mb-2"},'–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ "–û—Ç–∑—ã–≤"',-1)),m(t("input",{"onUpdate:modelValue":e[20]||(e[20]=s=>o.form.messages.menu.review_button=s),type:"text",placeholder:"‚≠ê –û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤ –Ω–∞ –Ø–Ω–¥–µ–∫—Å –ö–∞—Ä—Ç–∞—Ö",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[g,o.form.messages.menu.review_button]])]),t("div",null,[e[54]||(e[54]=t("label",{class:"block text-sm font-medium mb-2"},'–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ "–ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é"',-1)),m(t("input",{"onUpdate:modelValue":e[21]||(e[21]=s=>o.form.messages.menu.back_to_menu=s),type:"text",placeholder:"‚¨ÖÔ∏è –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[g,o.form.messages.menu.back_to_menu]])])]),t("div",ao,[e[58]||(e[58]=t("h4",{class:"text-md font-medium"},"–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º",-1)),t("div",null,[e[56]||(e[56]=t("label",{class:"block text-sm font-medium mb-2"},"–®–∞–±–ª–æ–Ω —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤–æ–π –∑–∞—è–≤–∫–µ",-1)),m(t("textarea",{"onUpdate:modelValue":e[22]||(e[22]=s=>o.form.messages.notifications.consultation_template=s),rows:"6",placeholder:`–ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é

–ò–º—è: {name}
–¢–µ–ª–µ—Ñ–æ–Ω: {phone}
–û–ø–∏—Å–∞–Ω–∏–µ: {description}
–î–∞—Ç–∞: {date}`,class:"w-full px-3 py-2 border border-border rounded-lg bg-background resize-none font-mono text-sm"},null,512),[[g,o.form.messages.notifications.consultation_template]]),e[57]||(e[57]=t("p",{class:"text-xs text-muted-foreground mt-1"}," –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: {name}, {phone}, {description}, {date} ",-1))])])])):f("",!0),o.activeTab==="advanced"?(l(),n("div",io,[e[63]||(e[63]=t("h3",{class:"text-lg font-semibold"},"–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏",-1)),t("div",null,[t("label",uo,[m(t("input",{"onUpdate:modelValue":e[23]||(e[23]=s=>o.form.other_settings.phone_validation_strict=s),type:"checkbox",class:"w-4 h-4"},null,512),[[O,o.form.other_settings.phone_validation_strict]]),e[60]||(e[60]=t("span",null,"–°—Ç—Ä–æ–≥–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞",-1))])]),t("div",null,[e[61]||(e[61]=t("label",{class:"block text-sm font-medium mb-2"},"–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –æ–ø–∏—Å–∞–Ω–∏—è",-1)),m(t("input",{"onUpdate:modelValue":e[24]||(e[24]=s=>o.form.other_settings.max_description_length=s),type:"number",min:"10",max:"5000",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[g,o.form.other_settings.max_description_length,void 0,{number:!0}]])]),t("div",null,[e[62]||(e[62]=t("label",{class:"block text-sm font-medium mb-2"},"–¢–∞–π–º–∞—É—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∫–∏ (—Å–µ–∫)",-1)),m(t("input",{"onUpdate:modelValue":e[25]||(e[25]=s=>o.form.other_settings.subscription_check_timeout=s),type:"number",min:"1",max:"30",class:"w-full h-10 px-3 border border-border rounded-lg bg-background"},null,512),[[g,o.form.other_settings.subscription_check_timeout,void 0,{number:!0}]])])])):f("",!0),t("div",mo,[t("button",{type:"submit",disabled:o.saving,class:"flex-1 h-11 px-6 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-2xl disabled:opacity-50"},i(o.saving?"–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...":"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏"),9,bo)])],32)])}const fo=T(Ht,[["render",co]]),go={name:"BotStatistics",props:{botId:{type:[String,Number],required:!0}},setup(d){const e=c(!1),a=c(null),o=async()=>{e.value=!0;try{const u=await S(`/bot-management/${d.botId}/statistics`);if(!u.ok)throw new Error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏");const _=await u.json();_.success&&_.data&&(a.value=_.data)}catch(u){console.error("Error fetching statistics:",u)}finally{e.value=!1}};return q(()=>{o()}),{loading:e,statistics:a}}},xo={class:"bot-statistics space-y-6"},po={key:0,class:"text-center py-12"},vo={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},_o={class:"bg-card rounded-lg border border-border p-6"},yo={class:"text-3xl font-semibold"},ko={class:"bg-card rounded-lg border border-border p-6"},wo={class:"text-3xl font-semibold"},ho={class:"bg-card rounded-lg border border-border p-6"},Co={class:"text-3xl font-semibold"},Mo={class:"bg-card rounded-lg border border-border p-6"},Bo={class:"text-3xl font-semibold"},Io={key:2,class:"bg-card rounded-lg border border-border p-6"},Uo={class:"grid grid-cols-3 gap-4"},Vo={class:"text-2xl font-semibold"},So={class:"text-2xl font-semibold"},To={class:"text-2xl font-semibold"},qo={key:3,class:"bg-card rounded-lg border border-border p-6"},jo={class:"space-y-2"},Eo={class:"font-medium"},Do={class:"text-sm text-muted-foreground"};function Fo(d,e,a,o,u,_){return l(),n("div",xo,[e[10]||(e[10]=t("h2",{class:"text-2xl font-semibold"},"–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞",-1)),o.loading?(l(),n("div",po,[...e[0]||(e[0]=[t("p",{class:"text-muted-foreground"},"–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏...",-1)])])):f("",!0),!o.loading&&o.statistics?(l(),n("div",vo,[t("div",_o,[e[1]||(e[1]=t("h3",{class:"text-sm font-medium text-muted-foreground mb-2"},"–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π",-1)),t("p",yo,i(o.statistics.total_users||0),1)]),t("div",ko,[e[2]||(e[2]=t("h3",{class:"text-sm font-medium text-muted-foreground mb-2"},"–ê–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞ 30 –¥–Ω–µ–π",-1)),t("p",wo,i(o.statistics.active_users_30d||0),1)]),t("div",ho,[e[3]||(e[3]=t("h3",{class:"text-sm font-medium text-muted-foreground mb-2"},"–í—Å–µ–≥–æ –∑–∞—è–≤–æ–∫",-1)),t("p",Co,i(o.statistics.total_consultations||0),1)]),t("div",Mo,[e[4]||(e[4]=t("h3",{class:"text-sm font-medium text-muted-foreground mb-2"},"–°–∫–∞—á–∏–≤–∞–Ω–∏–π –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤",-1)),t("p",Bo,i(o.statistics.materials_downloads||0),1)])])):f("",!0),!o.loading&&o.statistics?(l(),n("div",Io,[e[8]||(e[8]=t("h3",{class:"text-lg font-semibold mb-4"},"–ó–∞—è–≤–∫–∏ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º",-1)),t("div",Uo,[t("div",null,[e[5]||(e[5]=t("p",{class:"text-sm text-muted-foreground"},"–ù–æ–≤—ã–µ",-1)),t("p",Vo,i(o.statistics.consultations_by_status?.new||0),1)]),t("div",null,[e[6]||(e[6]=t("p",{class:"text-sm text-muted-foreground"},"–í —Ä–∞–±–æ—Ç–µ",-1)),t("p",So,i(o.statistics.consultations_by_status?.in_progress||0),1)]),t("div",null,[e[7]||(e[7]=t("p",{class:"text-sm text-muted-foreground"},"–ó–∞–∫—Ä—ã—Ç—ã–µ",-1)),t("p",To,i(o.statistics.consultations_by_status?.closed||0),1)])])])):f("",!0),!o.loading&&o.statistics&&o.statistics.popular_materials?.length>0?(l(),n("div",qo,[e[9]||(e[9]=t("h3",{class:"text-lg font-semibold mb-4"},"–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã",-1)),t("div",jo,[(l(!0),n(U,null,V(o.statistics.popular_materials,s=>(l(),n("div",{key:s.id,class:"flex items-center justify-between p-3 bg-muted/30 rounded-lg"},[t("p",Eo,i(s.title),1),t("p",Do,i(s.download_count||0)+" —Å–∫–∞—á–∏–≤–∞–Ω–∏–π",1)]))),128))])])):f("",!0)])}const Po=T(go,[["render",Fo]]),zo={name:"BotManagement",components:{ConsultationTable:Ge,MaterialCategoryTree:Qt,BotSettingsForm:fo,BotStatistics:Po},setup(){const d=Y(),e=X(()=>d.params.botId),a=c(!1),o=c(null),u=c(null),_=c("consultations"),s=[{key:"consultations",label:"–ó–∞—è–≤–∫–∏"},{key:"materials",label:"–ú–∞—Ç–µ—Ä–∏–∞–ª—ã"},{key:"settings",label:"–ù–∞—Å—Ç—Ä–æ–π–∫–∏"},{key:"statistics",label:"–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"}],r=async()=>{a.value=!0,o.value=null;try{const v=await S(`/bots/${e.value}`);if(!v.ok){const y=await v.json().catch(()=>({}));throw new Error(y.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –±–æ—Ç–∞")}const w=await v.json();u.value=w.data||null}catch(v){o.value=v.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –±–æ—Ç–∞"}finally{a.value=!1}};return q(()=>{r()}),{botId:e,loading:a,error:o,bot:u,activeTab:_,tabs:s,fetchBot:r}}},Ao={class:"bot-management-page space-y-6"},No={class:"flex items-center justify-between"},Lo={key:0,class:"text-muted-foreground mt-1"},Ro={key:0,class:"flex items-center justify-center py-12"},Go={key:1,class:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg"},Oo={class:"text-destructive"},Ko={key:2,class:"bg-card rounded-lg border border-border"},Qo={class:"border-b border-border"},Ho={class:"flex -mb-px"},Jo=["onClick"],Wo={class:"p-6"},Xo={key:0},Yo={key:1},Zo={key:2},$o={key:3};function es(d,e,a,o,u,_){const s=D("ConsultationTable"),r=D("MaterialCategoryTree"),v=D("BotSettingsForm"),w=D("BotStatistics");return l(),n("div",Ao,[t("div",No,[t("div",null,[e[1]||(e[1]=t("h1",{class:"text-3xl font-semibold text-foreground"},"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–æ–º",-1)),o.bot?(l(),n("p",Lo,i(o.bot.name),1)):f("",!0)]),t("button",{onClick:e[0]||(e[0]=y=>d.$router.push({name:"admin.bots"})),class:"h-11 px-6 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-2xl shadow-lg shadow-accent/10 inline-flex items-center justify-center gap-2"}," ‚Üê –ù–∞–∑–∞–¥ –∫ –±–æ—Ç–∞–º ")]),o.loading?(l(),n("div",Ro,[...e[2]||(e[2]=[t("p",{class:"text-muted-foreground"},"–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...",-1)])])):f("",!0),o.error?(l(),n("div",Go,[t("p",Oo,i(o.error),1)])):f("",!0),!o.loading&&o.bot?(l(),n("div",Ko,[t("div",Qo,[t("nav",Ho,[(l(!0),n(U,null,V(o.tabs,y=>(l(),n("button",{key:y.key,onClick:I=>o.activeTab=y.key,class:z(["px-6 py-4 text-sm font-medium border-b-2 transition-colors",o.activeTab===y.key?"border-accent text-accent":"border-transparent text-muted-foreground hover:text-foreground hover:border-muted-foreground"])},i(y.label),11,Jo))),128))])]),t("div",Wo,[o.activeTab==="consultations"?(l(),n("div",Xo,[F(s,{"bot-id":o.botId},null,8,["bot-id"])])):f("",!0),o.activeTab==="materials"?(l(),n("div",Yo,[F(r,{"bot-id":o.botId},null,8,["bot-id"])])):f("",!0),o.activeTab==="settings"?(l(),n("div",Zo,[F(v,{"bot-id":o.botId,onUpdated:o.fetchBot},null,8,["bot-id","onUpdated"])])):f("",!0),o.activeTab==="statistics"?(l(),n("div",$o,[F(w,{"bot-id":o.botId},null,8,["bot-id"])])):f("",!0)])])):f("",!0)])}const rs=T(zo,[["render",es]]);export{rs as default};
