import{c as p}from"./api-BACpyIk9.js";import{_ as f,c as r,a as t,b as n,e as j,t as s,F as c,q as g,p as u,o as l}from"./admin-B3aLB-lk.js";const v={name:"ParserObjectView",data(){return{loading:!1,error:null,object:null,objectType:"blocks",objectId:null}},async mounted(){this.objectType=this.$route.params.type||"blocks",this.objectId=this.$route.params.id,await this.fetchObject()},methods:{async fetchObject(){this.loading=!0,this.error=null;try{const e={blocks:"/blocks",parkings:"/parkings",villages:"/villages",plots:"/plots","commercial-blocks":"/commercial-blocks","commercial-premises":"/commercial-premises"}[this.objectType]||"/blocks",x=await p(`${e}/${this.objectId}`),b=await x.json();x.ok?this.object=b.data||b:this.error=b.message||"Ошибка при загрузке объекта"}catch(i){console.error("Error fetching object:",i),this.error="Ошибка при загрузке объекта"}finally{this.loading=!1}},goToEdit(){this.$router.push({name:"admin.parser.object.edit",params:{type:this.objectType,id:this.objectId}})},getDataSourceLabel(i){return{parser:"Парсер",manual:"Вручную",feed:"Feed",import:"Импорт"}[i]||i}}},_={class:"parser-object-view space-y-6"},y={class:"flex items-center justify-between mb-6"},k={class:"text-3xl font-semibold text-foreground"},w={class:"flex gap-2"},h={key:0,class:"flex items-center justify-center py-12"},D={key:1,class:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg"},S={class:"text-destructive"},L={key:2,class:"space-y-6"},T={class:"bg-card rounded-lg border border-border p-6"},U={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},R={class:"text-foreground"},I={class:"text-foreground"},C={class:"text-foreground font-medium"},E={class:"text-foreground"},O={class:"text-foreground"},V={class:"text-foreground"},B={class:"text-foreground"},N={class:"text-foreground"},F={class:"bg-card rounded-lg border border-border p-6"},G={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},P={class:"text-foreground"},q={class:"text-foreground"},z={key:0,class:"md:col-span-2"},J={class:"flex flex-wrap gap-2"},M={class:"bg-card rounded-lg border border-border p-6"},A={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},H={class:"text-foreground"},K={class:"text-xs text-muted-foreground mt-1"},Q={class:"text-foreground"},W={class:"text-xs text-muted-foreground mt-1"},X={class:"bg-card rounded-lg border border-border p-6"},Y={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Z={class:"text-foreground text-2xl font-semibold"},$={class:"text-foreground text-2xl font-semibold"},tt={class:"text-foreground text-2xl font-semibold"},et={class:"bg-card rounded-lg border border-border p-6"},ot={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},st={class:"text-foreground"},rt={class:"bg-card rounded-lg border border-border p-6"},lt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},dt={class:"text-foreground"},nt={class:"text-foreground"},it={class:"text-foreground"},mt={key:0,class:"bg-card rounded-lg border border-border p-6"},ut={class:"space-y-4"},bt={key:0},ct={class:"flex flex-wrap gap-2"},gt={key:1},xt={class:"flex flex-wrap gap-2"},at={key:2},pt={class:"flex flex-wrap gap-2"},ft={key:3},jt={class:"p-4 bg-muted rounded-lg text-xs overflow-auto"},vt={class:"bg-card rounded-lg border border-border p-6"},_t={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},yt={class:"text-foreground"},kt={class:"text-foreground"},wt={class:"text-foreground"},ht={class:"text-foreground"};function Dt(i,e,x,b,o,a){return l(),r("div",_,[t("div",y,[t("div",null,[t("button",{onClick:e[0]||(e[0]=d=>i.$router.go(-1)),class:"mb-2 text-sm text-muted-foreground hover:text-foreground flex items-center gap-2"},[...e[2]||(e[2]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),j(" Назад к списку ",-1)])]),t("h1",k,s(o.object?.name||"Загрузка..."),1),e[3]||(e[3]=t("p",{class:"text-muted-foreground mt-1"},"Просмотр объекта парсера",-1))]),t("div",w,[t("button",{onClick:e[1]||(e[1]=(...d)=>a.goToEdit&&a.goToEdit(...d)),class:"h-11 px-6 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors"}," Редактировать ")])]),o.loading?(l(),r("div",h,[...e[4]||(e[4]=[t("p",{class:"text-muted-foreground"},"Загрузка объекта...",-1)])])):n("",!0),o.error?(l(),r("div",D,[t("p",S,s(o.error),1)])):n("",!0),!o.loading&&o.object?(l(),r("div",L,[t("div",T,[e[13]||(e[13]=t("h2",{class:"text-xl font-semibold text-foreground mb-4"},"Основная информация",-1)),t("div",U,[t("div",null,[e[5]||(e[5]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-1"},"ID",-1)),t("p",R,s(o.object.id),1)]),t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-1"},"GUID",-1)),t("p",I,s(o.object.guid||"-"),1)]),t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-1"},"Название",-1)),t("p",C,s(o.object.name),1)]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-1"},"Адрес",-1)),t("p",E,s(o.object.address||"-"),1)]),t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-1"},"Город",-1)),t("p",O,s(o.object.city?.name||"-"),1)]),t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-1"},"Регион",-1)),t("p",V,s(o.object.region?.name||"-"),1)]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-1"},"Локация",-1)),t("p",B,s(o.object.location?.name||"-"),1)]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-1"},"Застройщик",-1)),t("p",N,s(o.object.builder?.name||"-"),1)])])]),t("div",F,[e[17]||(e[17]=t("h2",{class:"text-xl font-semibold text-foreground mb-4"},"Местоположение",-1)),t("div",G,[t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-1"},"Широта",-1)),t("p",P,s(o.object.coordinates?.latitude||"-"),1)]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-1"},"Долгота",-1)),t("p",q,s(o.object.coordinates?.longitude||"-"),1)]),o.object.subways&&o.object.subways.length>0?(l(),r("div",z,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-2"},"Метро",-1)),t("div",J,[(l(!0),r(c,null,g(o.object.subways,d=>(l(),r("span",{key:d.id,class:"px-3 py-1 bg-muted rounded-md text-sm"},s(d.name||d.subway_line?.name||"-"),1))),128))])])):n("",!0)])]),t("div",M,[e[20]||(e[20]=t("h2",{class:"text-xl font-semibold text-foreground mb-4"},"Цены",-1)),t("div",A,[t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-1"},"Минимальная цена",-1)),t("p",H,s(o.object.prices?.min_formatted||"-"),1),t("p",K,s(o.object.prices?.min?(o.object.prices.min/100).toLocaleString("ru-RU")+" ₽":""),1)]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-1"},"Максимальная цена",-1)),t("p",Q,s(o.object.prices?.max_formatted||"-"),1),t("p",W,s(o.object.prices?.max?(o.object.prices.max/100).toLocaleString("ru-RU")+" ₽":""),1)])])]),t("div",X,[e[24]||(e[24]=t("h2",{class:"text-xl font-semibold text-foreground mb-4"},"Статистика",-1)),t("div",Y,[t("div",null,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-1"},"Всего квартир",-1)),t("p",Z,s(o.object.stats?.apartments_count||0),1)]),t("div",null,[e[22]||(e[22]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-1"},"На просмотр",-1)),t("p",$,s(o.object.stats?.view_apartments_count||0),1)]),t("div",null,[e[23]||(e[23]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-1"},"Эксклюзивных",-1)),t("p",tt,s(o.object.stats?.exclusive_apartments_count||0),1)])])]),t("div",et,[e[31]||(e[31]=t("h2",{class:"text-xl font-semibold text-foreground mb-4"},"Статусы",-1)),t("div",ot,[t("div",null,[e[25]||(e[25]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-1"},"Статус",-1)),t("p",st,s(o.object.status||"-"),1)]),t("div",null,[e[26]||(e[26]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-1"},"Активен",-1)),t("span",{class:u(["px-2 py-1 text-xs rounded-md",o.object.is_active?"bg-green-500/10 text-green-500":"bg-red-500/10 text-red-500"])},s(o.object.is_active?"Активен":"Неактивен"),3)]),t("div",null,[e[27]||(e[27]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-1"},"Сьют",-1)),t("span",{class:u(["px-2 py-1 text-xs rounded-md",o.object.is_suite?"bg-blue-500/10 text-blue-500":"bg-gray-500/10 text-gray-500"])},s(o.object.is_suite?"Да":"Нет"),3)]),t("div",null,[e[28]||(e[28]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-1"},"Эксклюзив",-1)),t("span",{class:u(["px-2 py-1 text-xs rounded-md",o.object.is_exclusive?"bg-purple-500/10 text-purple-500":"bg-gray-500/10 text-gray-500"])},s(o.object.is_exclusive?"Да":"Нет"),3)]),t("div",null,[e[29]||(e[29]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-1"},"Помечен",-1)),t("span",{class:u(["px-2 py-1 text-xs rounded-md",o.object.is_marked?"bg-yellow-500/10 text-yellow-500":"bg-gray-500/10 text-gray-500"])},s(o.object.is_marked?"Да":"Нет"),3)]),t("div",null,[e[30]||(e[30]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-1"},"Источник данных",-1)),t("span",{class:u(["px-2 py-1 text-xs rounded-md",o.object.data_source==="parser"?"bg-blue-500/10 text-blue-500":"bg-gray-500/10 text-gray-500"])},s(a.getDataSourceLabel(o.object.data_source)),3)])])]),t("div",rt,[e[35]||(e[35]=t("h2",{class:"text-xl font-semibold text-foreground mb-4"},"Сроки",-1)),t("div",lt,[t("div",null,[e[32]||(e[32]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-1"},"Срок сдачи",-1)),t("p",dt,s(o.object.deadline||"-"),1)]),t("div",null,[e[33]||(e[33]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-1"},"Дата сдачи",-1)),t("p",nt,s(o.object.deadline_date?new Date(o.object.deadline_date).toLocaleDateString("ru-RU"):"-"),1)]),t("div",null,[e[34]||(e[34]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-1"},"Отделка",-1)),t("p",it,s(o.object.finishing||"-"),1)])])]),o.object.metadata||o.object.advantages||o.object.payment_types||o.object.contract_types?(l(),r("div",mt,[e[40]||(e[40]=t("h2",{class:"text-xl font-semibold text-foreground mb-4"},"Дополнительная информация",-1)),t("div",ut,[o.object.advantages&&o.object.advantages.length>0?(l(),r("div",bt,[e[36]||(e[36]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-2"},"Преимущества",-1)),t("div",ct,[(l(!0),r(c,null,g(o.object.advantages,(d,m)=>(l(),r("span",{key:m,class:"px-3 py-1 bg-muted rounded-md text-sm"},s(d),1))),128))])])):n("",!0),o.object.payment_types&&o.object.payment_types.length>0?(l(),r("div",gt,[e[37]||(e[37]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-2"},"Типы оплаты",-1)),t("div",xt,[(l(!0),r(c,null,g(o.object.payment_types,(d,m)=>(l(),r("span",{key:m,class:"px-3 py-1 bg-muted rounded-md text-sm"},s(d),1))),128))])])):n("",!0),o.object.contract_types&&o.object.contract_types.length>0?(l(),r("div",at,[e[38]||(e[38]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-2"},"Типы договоров",-1)),t("div",pt,[(l(!0),r(c,null,g(o.object.contract_types,(d,m)=>(l(),r("span",{key:m,class:"px-3 py-1 bg-muted rounded-md text-sm"},s(d),1))),128))])])):n("",!0),o.object.metadata?(l(),r("div",ft,[e[39]||(e[39]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-2"},"Метаданные",-1)),t("pre",jt,s(JSON.stringify(o.object.metadata,null,2)),1)])):n("",!0)])])):n("",!0),t("div",vt,[e[45]||(e[45]=t("h2",{class:"text-xl font-semibold text-foreground mb-4"},"Временные метки",-1)),t("div",_t,[t("div",null,[e[41]||(e[41]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-1"},"Создано",-1)),t("p",yt,s(o.object.created_at?new Date(o.object.created_at).toLocaleString("ru-RU"):"-"),1)]),t("div",null,[e[42]||(e[42]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-1"},"Обновлено",-1)),t("p",kt,s(o.object.updated_at?new Date(o.object.updated_at).toLocaleString("ru-RU"):"-"),1)]),t("div",null,[e[43]||(e[43]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-1"},"Спарсено",-1)),t("p",wt,s(o.object.parsed_at?new Date(o.object.parsed_at).toLocaleString("ru-RU"):"-"),1)]),t("div",null,[e[44]||(e[44]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-1"},"Последняя синхронизация",-1)),t("p",ht,s(o.object.last_synced_at?new Date(o.object.last_synced_at).toLocaleString("ru-RU"):"-"),1)])])])])):n("",!0)])}const Tt=f(v,[["render",Dt]]);export{Tt as default};
