import{_ as b,c as i,a as e,b as d,w as k,d as g,v,I as f,A as D,p as w,t as a,F as _,q as h,e as u,j as x,o as r}from"./admin-Cf5TFX-A.js";const I={name:"TrendSsoParser",data(){return{form:{phone:"+79045393434",password:"nwBvh4q"},loading:!1,loadingContent:!1,status:null,authData:null,contentUrl:"https://spb.trendagent.ru/objects/list",contentData:null,pagination:{count:20,offset:0,page:1,sort:"price",sort_order:"asc",object_type:"apartments"}}},methods:{async handleAuthenticate(){this.loading=!0,this.status={type:"info",title:"Выполняется...",message:"Авторизация через Trend SSO API..."},this.authData=null;try{const n=await x.post("/api/trendsso/authenticate",{phone:this.form.phone,password:this.form.password});if(n.data.success)this.status={type:"success",title:"Авторизация успешна",message:"Вы успешно авторизованы через Trend SSO API"},this.authData=n.data.data||{};else throw new Error(n.data.message||"Ошибка авторизации")}catch(n){let t="Произошла ошибка";n.response?t=n.response.data?.message||n.response.data?.error||`Ошибка сервера: ${n.response.status}`:n.request?t="Не удалось получить ответ от сервера. Проверьте подключение к интернету.":t=n.message||"Ошибка при выполнении запроса",this.status={type:"error",title:"Ошибка авторизации",message:t},console.error("Ошибка:",n)}finally{this.loading=!1}},truncateToken(n){return n?n.length<=50?n:n.substring(0,25)+"..."+n.substring(n.length-25):""},formatDate(n){return n?new Date(n).toLocaleString("ru-RU"):""},async handleGetContent(n=!1){if(!this.authData||!this.authData.authenticated){this.status={type:"error",title:"Ошибка",message:"Сначала выполните авторизацию"};return}n&&(this.pagination.offset=0,this.pagination.page=1),this.loadingContent=!0,this.contentData=null;try{const t=await x.post("/api/trendsso/objects-list",{phone:this.form.phone,password:this.form.password,url:this.contentUrl,parse:!0,count:this.pagination.count,offset:this.pagination.offset,page:this.pagination.page,sort:this.pagination.sort,sort_order:this.pagination.sort_order,object_type:this.pagination.object_type});if(t.data.success)this.contentData=t.data,t.data.pagination&&(this.pagination.offset=t.data.pagination.offset,this.pagination.page=t.data.pagination.page);else throw new Error(t.data.message||"Ошибка получения контента")}catch(t){let m="Произошла ошибка";t.response?m=t.response.data?.message||t.response.data?.error||`Ошибка сервера: ${t.response.status}`:t.request?m="Не удалось получить ответ от сервера. Проверьте подключение к интернету.":m=t.message||"Ошибка при выполнении запроса",this.status={type:"error",title:"Ошибка получения контента",message:m},console.error("Ошибка:",t)}finally{this.loadingContent=!1}},async loadNextPage(){!this.contentData||!this.contentData.pagination||(this.pagination.offset+=this.pagination.count,this.pagination.page+=1,await this.handleGetContent())},async loadPreviousPage(){!this.contentData||!this.contentData.pagination||this.pagination.offset===0||(this.pagination.offset=Math.max(0,this.pagination.offset-this.pagination.count),this.pagination.page=Math.max(1,this.pagination.page-1),await this.handleGetContent())},formatBytes(n){if(!n)return"0 B";const t=1024,m=["B","KB","MB","GB"],p=Math.floor(Math.log(n)/Math.log(t));return Math.round(n/Math.pow(t,p)*100)/100+" "+m[p]},formatNumber(n){return n?n.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0"},formatPrice(n){return n?n.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0"},getObjectTypeLabel(n){return{apartments:"Квартиры",parking:"Паркинг",houses:"Дома с участками",plots:"Участки",commercial:"Коммерция"}[n]||n},getObjectImage(n){return n.images&&Array.isArray(n.images)&&n.images.length>0?n.images[0].thumbnail||n.images[0].full:n.image&&n.image.url?n.image.url:null},getObjectPrice(n){if(n.min_prices&&Array.isArray(n.min_prices)&&n.min_prices.length>0){if(n.min_prices[0].value&&typeof n.min_prices[0].value=="string"&&!n.min_prices[0].price)return n.min_prices.map(t=>`${t.label}: ${t.value} ${t.unit||"₽"}`).join(", ");{const t=n.min_prices.map(m=>m.price).filter(m=>m!=null);if(t.length>0){const m=Math.min(...t),p=Math.max(...t);return m===p?`${this.formatPrice(m)} ₽`:n.min_prices[0].purpose?n.min_prices.map(s=>`${s.purpose?.label||s.value||""}: ${this.formatPrice(s.price)} ₽`).join(", "):`${this.formatPrice(m)} - ${this.formatPrice(p)} ₽`}}}return n.min_price&&n.max_price?`${this.formatPrice(n.min_price)} - ${this.formatPrice(n.max_price)} ₽`:n.min_price?`от ${this.formatPrice(n.min_price)} ₽`:null},formatReward(n){return!Array.isArray(n)||n.length===0?"":n.map(t=>typeof t=="string"?t:t.label&&t.value?`${t.label}: ${t.value}`:t.value?t.value:JSON.stringify(t)).join(", ")},getObjectReward(n){return typeof n.reward=="string"?n.reward:Array.isArray(n.reward)&&n.reward.length>0?this.formatReward(n.reward):null},handleImageError(n){n.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMjgiIGhlaWdodD0iMTI4IiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik02NCA0MEM1Ny4zNzI2IDQwIDUyIDQ1LjM3MjYgNTIgNTJDNTIgNTguNjI3NCA1Ny4zNzI2IDY0IDY0IDY0QzcwLjYyNzQgNjQgNzYgNTguNjI3NCA3NiA1MkM3NiA0NS4zNzI2IDcwLjYyNzQgNDAgNjQgNDBaIiBmaWxsPSIjOUI5Q0E0Ii8+CjxwYXRoIGQ9Ik00MCA4OEw1MiA3Mkw2NCA4MEw3NiA3Mkw4OCA4OEg0MFoiIGZpbGw9IiM5QjlDQTQiLz4KPC9zdmc+"}}},N={class:"container mx-auto p-6"},C={class:"bg-card rounded-lg border p-6 mb-6"},P={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},M=["disabled"],A={key:0},O={key:1},T={key:0,class:"bg-card rounded-lg border p-6 mb-6"},S={class:"space-y-4"},U={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},G={class:"flex gap-2"},L=["disabled"],R={key:0},B={key:1},E=["disabled"],z=["disabled"],Q={key:1,class:"bg-card rounded-lg border p-6"},V={class:"space-y-4"},Y={class:"flex items-center gap-3"},Z={class:"font-medium"},q={class:"text-sm text-muted-foreground"},H={key:0,class:"mt-4 pt-4 border-t"},W={class:"space-y-2 text-sm"},F={class:"grid grid-cols-2 gap-4"},J={class:"font-medium"},j={key:0,class:"text-green-600"},K={key:1,class:"text-red-600"},X={key:0},$={class:"font-medium"},tt={key:0},et={class:"space-y-1 bg-muted p-3 rounded"},st={key:0,class:"text-sm"},nt={class:"font-medium ml-2"},ot={key:1,class:"text-sm"},it={class:"font-medium ml-2"},rt={key:2,class:"text-sm"},at={class:"font-medium ml-2"},dt={key:3,class:"text-sm"},lt={class:"font-mono text-xs ml-2"},ut={key:1},mt={class:"space-y-1"},gt={key:0,class:"font-mono text-xs bg-muted p-2 rounded break-all"},pt={key:1,class:"font-mono text-xs bg-muted p-2 rounded break-all"},ct={key:2,class:"font-mono text-xs bg-muted p-2 rounded break-all"},ft={key:2},vt={class:"font-mono text-xs bg-muted p-2 rounded break-all"},_t={key:3},ht={class:"text-xs break-all"},xt={key:4},yt={class:"text-muted-foreground mb-1"},bt={class:"space-y-1 max-h-40 overflow-y-auto"},kt={class:"font-medium"},Dt={class:"text-muted-foreground truncate"},wt={key:2,class:"bg-card rounded-lg border p-6"},It={class:"space-y-4"},Nt={class:"grid grid-cols-2 gap-4 text-sm"},Ct={class:"font-medium break-all"},Pt={class:"font-medium"},Mt={key:0,class:"text-xs text-muted-foreground"},At={class:"font-medium text-xs break-all"},Ot={class:"font-medium"},Tt={key:0,class:"mt-4 pt-4 border-t"},St={class:"space-y-2 text-sm"},Ut={class:"grid grid-cols-2 gap-4"},Gt={class:"font-medium text-lg"},Lt={class:"font-medium text-lg"},Rt={key:0},Bt={class:"font-medium text-lg"},Et={key:1},zt={class:"font-medium text-lg"},Qt={key:2},Vt={class:"font-medium text-lg"},Yt={key:3},Zt={class:"font-medium text-lg"},qt={key:4},Ht={class:"font-medium text-lg"},Wt={key:5},Ft={class:"font-medium text-lg"},Jt={key:6},jt={class:"font-medium text-lg"},Kt={key:7},Xt={class:"font-medium text-lg"},$t={key:8},te={class:"font-medium text-lg"},ee={class:"font-medium text-lg"},se={key:0,class:"mt-4 pt-4 border-t"},ne={class:"flex items-center justify-between text-sm"},oe={class:"text-muted-foreground"},ie={class:"text-muted-foreground"},re={key:1,class:"mt-4 pt-4 border-t"},ae={class:"bg-muted p-3 rounded text-xs"},de={class:"font-mono space-y-1"},le={key:0,class:"mt-2"},ue={key:0,class:"mt-1 break-all"},me=["href"],ge={key:2,class:"mt-4"},pe={class:"font-semibold mb-2"},ce={class:"space-y-4 max-h-96 overflow-y-auto"},fe={class:"flex gap-4"},ve={key:0,class:"flex-shrink-0"},_e=["src","alt"],he={class:"flex-1 space-y-2 text-sm"},xe={class:"font-medium text-base"},ye={key:0,class:"text-muted-foreground"},be={key:1,class:"text-muted-foreground"},ke={key:2,class:"text-muted-foreground"},De={key:3,class:"text-muted-foreground"},we={key:4,class:"text-muted-foreground"},Ie={key:5,class:"text-muted-foreground"},Ne={key:0},Ce={key:6,class:"text-muted-foreground"},Pe={key:7,class:"text-muted-foreground"},Me={key:0},Ae={key:8,class:"text-muted-foreground"},Oe={key:9,class:"text-muted-foreground"},Te={key:10,class:"text-muted-foreground"},Se={key:0},Ue={class:"font-medium"},Ge={key:1},Le={class:"font-medium"},Re={key:2},Be={class:"font-medium"},Ee={key:11,class:"mt-2"},ze={class:"bg-primary/20 text-primary px-2 py-1 rounded text-xs"},Qe={key:12,class:"mt-2"},Ve=["href"];function Ye(n,t,m,p,s,l){return r(),i("div",N,[t[77]||(t[77]=e("div",{class:"mb-6"},[e("h1",{class:"text-3xl font-bold mb-2"},"Авторизация Trend SSO"),e("p",{class:"text-muted-foreground"},"Авторизация через Trend SSO API")],-1)),e("div",C,[t[18]||(t[18]=e("h2",{class:"text-xl font-semibold mb-4"},"Параметры авторизации",-1)),e("form",{onSubmit:t[2]||(t[2]=k((...o)=>l.handleAuthenticate&&l.handleAuthenticate(...o),["prevent"])),class:"space-y-4"},[e("div",P,[e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium mb-2"},"Телефон",-1)),g(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>s.form.phone=o),type:"tel",required:"",autocomplete:"tel",class:"w-full rounded-md border bg-background px-3 py-2 text-sm",placeholder:"+7 999 637 11 82"},null,512),[[v,s.form.phone]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium mb-2"},"Пароль",-1)),g(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>s.form.password=o),type:"password",required:"",autocomplete:"current-password",class:"w-full rounded-md border bg-background px-3 py-2 text-sm",placeholder:"Пароль"},null,512),[[v,s.form.password]])])]),e("button",{type:"submit",disabled:s.loading,class:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 disabled:opacity-50"},[s.loading?(r(),i("span",O,"Выполняется...")):(r(),i("span",A,"Авторизоваться"))],8,M)],32)]),s.authData&&s.authData.authenticated?(r(),i("div",T,[t[28]||(t[28]=e("h2",{class:"text-xl font-semibold mb-4"},"Получение контента",-1)),e("div",S,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium mb-2"},"URL страницы",-1)),g(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.contentUrl=o),type:"url",class:"w-full rounded-md border bg-background px-3 py-2 text-sm",placeholder:"https://spb.trendagent.ru/objects/list"},null,512),[[v,s.contentUrl]])]),e("div",U,[e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium mb-2"},"Тип объекта",-1)),g(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>s.pagination.object_type=o),onChange:t[5]||(t[5]=o=>l.handleGetContent(!0)),class:"w-full rounded-md border bg-background px-3 py-2 text-sm"},[...t[20]||(t[20]=[D('<option value="apartments">Квартиры</option><option value="parking">Паркинг</option><option value="houses">Дома с участками</option><option value="plots">Участки</option><option value="commercial">Коммерция</option>',5)])],544),[[f,s.pagination.object_type]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium mb-2"},"Количество объектов",-1)),g(e("select",{"onUpdate:modelValue":t[6]||(t[6]=o=>s.pagination.count=o),onChange:t[7]||(t[7]=o=>l.handleGetContent(!0)),class:"w-full rounded-md border bg-background px-3 py-2 text-sm"},[...t[22]||(t[22]=[e("option",{value:20},"20",-1),e("option",{value:50},"50",-1),e("option",{value:100},"100",-1)])],544),[[f,s.pagination.count]])]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium mb-2"},"Сортировка",-1)),g(e("select",{"onUpdate:modelValue":t[8]||(t[8]=o=>s.pagination.sort=o),onChange:t[9]||(t[9]=o=>l.handleGetContent(!0)),class:"w-full rounded-md border bg-background px-3 py-2 text-sm"},[...t[24]||(t[24]=[e("option",{value:"price"},"По цене",-1),e("option",{value:"name"},"По названию",-1),e("option",{value:"deadline"},"По сроку сдачи",-1)])],544),[[f,s.pagination.sort]])]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium mb-2"},"Порядок",-1)),g(e("select",{"onUpdate:modelValue":t[10]||(t[10]=o=>s.pagination.sort_order=o),onChange:t[11]||(t[11]=o=>l.handleGetContent(!0)),class:"w-full rounded-md border bg-background px-3 py-2 text-sm"},[...t[26]||(t[26]=[e("option",{value:"asc"},"По возрастанию",-1),e("option",{value:"desc"},"По убыванию",-1)])],544),[[f,s.pagination.sort_order]])])]),e("div",G,[e("button",{onClick:t[12]||(t[12]=(...o)=>l.handleGetContent&&l.handleGetContent(...o)),disabled:s.loadingContent,class:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 disabled:opacity-50"},[s.loadingContent?(r(),i("span",B,"Загрузка...")):(r(),i("span",R,"Получить контент"))],8,L),s.contentData&&s.contentData.pagination&&s.contentData.pagination.offset>0?(r(),i("button",{key:0,onClick:t[13]||(t[13]=(...o)=>l.loadPreviousPage&&l.loadPreviousPage(...o)),disabled:s.loadingContent,class:"px-4 py-2 bg-secondary text-secondary-foreground rounded-md hover:bg-secondary/90 disabled:opacity-50"}," ← Предыдущие ",8,E)):d("",!0),s.contentData&&s.contentData.pagination&&s.contentData.pagination.has_more?(r(),i("button",{key:1,onClick:t[14]||(t[14]=(...o)=>l.loadNextPage&&l.loadNextPage(...o)),disabled:s.loadingContent,class:"px-4 py-2 bg-secondary text-secondary-foreground rounded-md hover:bg-secondary/90 disabled:opacity-50"}," Следующие → ",8,z)):d("",!0)])])])):d("",!0),s.status?(r(),i("div",Q,[t[43]||(t[43]=e("h2",{class:"text-xl font-semibold mb-4"},"Статус авторизации",-1)),e("div",V,[e("div",Y,[e("div",{class:w(["w-4 h-4 rounded-full",s.status.type==="success"?"bg-green-500":s.status.type==="error"?"bg-red-500":"bg-yellow-500"])},null,2),e("div",null,[e("div",Z,a(s.status.title),1),e("div",q,a(s.status.message),1)])]),s.authData?(r(),i("div",H,[t[42]||(t[42]=e("h3",{class:"font-semibold mb-3"},"Детали авторизации",-1)),e("div",W,[e("div",F,[e("div",null,[t[29]||(t[29]=e("div",{class:"text-muted-foreground"},"Статус",-1)),e("div",J,[s.authData.authenticated?(r(),i("span",j,"Авторизован")):(r(),i("span",K,"Не авторизован"))])]),s.authData.timestamp?(r(),i("div",X,[t[30]||(t[30]=e("div",{class:"text-muted-foreground"},"Время авторизации",-1)),e("div",$,a(l.formatDate(s.authData.timestamp)),1)])):d("",!0)]),s.authData.user?(r(),i("div",tt,[t[35]||(t[35]=e("div",{class:"text-muted-foreground mb-1"},"Данные пользователя",-1)),e("div",et,[s.authData.user.name?(r(),i("div",st,[t[31]||(t[31]=e("span",{class:"text-muted-foreground"},"Имя:",-1)),e("span",nt,a(s.authData.user.name),1)])):d("",!0),s.authData.user.email?(r(),i("div",ot,[t[32]||(t[32]=e("span",{class:"text-muted-foreground"},"Email:",-1)),e("span",it,a(s.authData.user.email),1)])):d("",!0),s.authData.user.phone?(r(),i("div",rt,[t[33]||(t[33]=e("span",{class:"text-muted-foreground"},"Телефон:",-1)),e("span",at,a(s.authData.user.phone),1)])):d("",!0),s.authData.user.id?(r(),i("div",dt,[t[34]||(t[34]=e("span",{class:"text-muted-foreground"},"ID:",-1)),e("span",lt,a(s.authData.user.id),1)])):d("",!0)])])):d("",!0),s.authData.tokens&&Object.keys(s.authData.tokens).length>0?(r(),i("div",ut,[t[39]||(t[39]=e("div",{class:"text-muted-foreground mb-1"},"Токены",-1)),e("div",mt,[s.authData.tokens.access_token?(r(),i("div",gt,[t[36]||(t[36]=e("div",{class:"text-muted-foreground text-xs mb-1"},"Access Token:",-1)),e("div",null,a(l.truncateToken(s.authData.tokens.access_token)),1)])):d("",!0),s.authData.tokens.auth_token?(r(),i("div",pt,[t[37]||(t[37]=e("div",{class:"text-muted-foreground text-xs mb-1"},"Auth Token:",-1)),e("div",null,a(l.truncateToken(s.authData.tokens.auth_token)),1)])):d("",!0),s.authData.tokens.refresh_token?(r(),i("div",ct,[t[38]||(t[38]=e("div",{class:"text-muted-foreground text-xs mb-1"},"Refresh Token:",-1)),e("div",null,a(l.truncateToken(s.authData.tokens.refresh_token)),1)])):d("",!0)])])):d("",!0),s.authData.session_id?(r(),i("div",ft,[t[40]||(t[40]=e("div",{class:"text-muted-foreground"},"Session ID",-1)),e("div",vt,a(s.authData.session_id),1)])):d("",!0),s.authData.current_url?(r(),i("div",_t,[t[41]||(t[41]=e("div",{class:"text-muted-foreground"},"Текущий URL",-1)),e("div",ht,a(s.authData.current_url),1)])):d("",!0),s.authData.cookies&&Object.keys(s.authData.cookies).length>0?(r(),i("div",xt,[e("div",yt,"Cookies ("+a(Object.keys(s.authData.cookies).length)+")",1),e("div",bt,[(r(!0),i(_,null,h(s.authData.cookies,(o,c)=>(r(),i("div",{key:c,class:"text-xs bg-muted p-2 rounded"},[e("div",kt,a(c),1),e("div",Dt,a(o.value),1)]))),128))])])):d("",!0)])])):d("",!0)])])):d("",!0),s.contentData?(r(),i("div",wt,[t[76]||(t[76]=e("h2",{class:"text-xl font-semibold mb-4"},"Контент страницы",-1)),e("div",It,[e("div",Nt,[e("div",null,[t[44]||(t[44]=e("div",{class:"text-muted-foreground"},"URL",-1)),e("div",Ct,a(s.contentData.url),1)]),e("div",null,[t[45]||(t[45]=e("div",{class:"text-muted-foreground"},"Тип объекта",-1)),e("div",Pt,[u(a(l.getObjectTypeLabel(s.contentData.object_type))+" ",1),s.contentData.room_filter?(r(),i("span",Mt," (room: "+a(s.contentData.room_filter.join(", "))+") ",1)):d("",!0)])]),e("div",null,[t[46]||(t[46]=e("div",{class:"text-muted-foreground"},"API Endpoint",-1)),e("div",At,a(s.contentData.api_endpoint),1)]),e("div",null,[t[47]||(t[47]=e("div",{class:"text-muted-foreground"},"Источник",-1)),e("div",Ot,a(s.contentData.source),1)])]),s.contentData.data?(r(),i("div",Tt,[t[75]||(t[75]=e("h3",{class:"font-semibold mb-3"},"Данные объектов",-1)),e("div",St,[e("div",Ut,[e("div",null,[t[48]||(t[48]=e("div",{class:"text-muted-foreground"},"Всего объектов (blocks)",-1)),e("div",Gt,a(s.contentData.data.blocks_count),1)]),e("div",null,[t[49]||(t[49]=e("div",{class:"text-muted-foreground"},"Превью объектов (prelaunches)",-1)),e("div",Lt,a(s.contentData.data.prelaunches_count),1)]),s.contentData.object_type!=="parking"?(r(),i("div",Rt,[t[50]||(t[50]=e("div",{class:"text-muted-foreground"},"Всего квартир",-1)),e("div",Bt,a(l.formatNumber(s.contentData.data.apartments_count)),1)])):d("",!0),s.contentData.object_type!=="parking"?(r(),i("div",Et,[t[51]||(t[51]=e("div",{class:"text-muted-foreground"},"Забронировано",-1)),e("div",zt,a(l.formatNumber(s.contentData.data.booked_apartments_count)),1)])):d("",!0),s.contentData.object_type!=="parking"?(r(),i("div",Qt,[t[52]||(t[52]=e("div",{class:"text-muted-foreground"},"На просмотре",-1)),e("div",Vt,a(l.formatNumber(s.contentData.data.view_apartments_count)),1)])):d("",!0),s.contentData.object_type==="parking"?(r(),i("div",Yt,[t[53]||(t[53]=e("div",{class:"text-muted-foreground"},"Всего мест",-1)),e("div",Zt,a(l.formatNumber(s.contentData.data.places_count)),1)])):d("",!0),s.contentData.object_type==="parking"?(r(),i("div",qt,[t[54]||(t[54]=e("div",{class:"text-muted-foreground"},"Забронировано мест",-1)),e("div",Ht,a(l.formatNumber(s.contentData.data.booked_places_count)),1)])):d("",!0),s.contentData.object_type==="plots"?(r(),i("div",Wt,[t[55]||(t[55]=e("div",{class:"text-muted-foreground"},"Всего участков",-1)),e("div",Ft,a(l.formatNumber(s.contentData.data.plots_count)),1)])):d("",!0),s.contentData.object_type==="plots"?(r(),i("div",Jt,[t[56]||(t[56]=e("div",{class:"text-muted-foreground"},"Всего поселков",-1)),e("div",jt,a(l.formatNumber(s.contentData.data.total_count)),1)])):d("",!0),s.contentData.object_type==="commercial"?(r(),i("div",Kt,[t[57]||(t[57]=e("div",{class:"text-muted-foreground"},"Всего помещений",-1)),e("div",Xt,a(l.formatNumber(s.contentData.data.premises_count)),1)])):d("",!0),s.contentData.object_type==="commercial"?(r(),i("div",$t,[t[58]||(t[58]=e("div",{class:"text-muted-foreground"},"Забронировано помещений",-1)),e("div",te,a(l.formatNumber(s.contentData.data.booked_premises_count)),1)])):d("",!0),e("div",null,[t[59]||(t[59]=e("div",{class:"text-muted-foreground"},"В списке",-1)),e("div",ee,a(s.contentData.data.objects_count),1)])]),s.contentData.pagination?(r(),i("div",se,[e("div",ne,[e("div",oe," Показано: "+a(s.contentData.pagination.offset+1)+" - "+a(s.contentData.pagination.offset+s.contentData.data.objects_count)+" из "+a(s.contentData.data.blocks_count),1),e("div",ie," Страница: "+a(s.contentData.pagination.page),1)])])):d("",!0),s.contentData.data.objects&&s.contentData.data.objects.length>0&&s.contentData.data.objects[0].image?(r(),i("div",re,[t[64]||(t[64]=e("h4",{class:"font-semibold mb-2"},"Структура изображений",-1)),e("div",ae,[e("div",de,[t[63]||(t[63]=e("div",null,[e("span",{class:"text-muted-foreground"},"Формат URL:"),u(" https://selcdn.trendagent.ru/images/{path}/m_{file_name}")],-1)),s.contentData.data.objects[0].image.path?(r(),i("div",le,[e("div",null,[t[60]||(t[60]=e("span",{class:"text-muted-foreground"},"Path:",-1)),u(" "+a(s.contentData.data.objects[0].image.path),1)]),e("div",null,[t[61]||(t[61]=e("span",{class:"text-muted-foreground"},"File name:",-1)),u(" "+a(s.contentData.data.objects[0].image.file_name),1)]),s.contentData.data.objects[0].image.url?(r(),i("div",ue,[t[62]||(t[62]=e("span",{class:"text-muted-foreground"},"URL:",-1)),e("a",{href:s.contentData.data.objects[0].image.url,target:"_blank",class:"text-primary hover:underline"},a(s.contentData.data.objects[0].image.url),9,me)])):d("",!0)])):d("",!0)])])])):d("",!0),s.contentData.data.objects&&s.contentData.data.objects.length>0?(r(),i("div",ge,[e("h4",pe,"Объекты ("+a(s.contentData.data.objects.length)+")",1),e("div",ce,[(r(!0),i(_,null,h(s.contentData.data.objects,(o,c)=>(r(),i("div",{key:c,class:"bg-muted p-4 rounded-lg border"},[e("div",fe,[l.getObjectImage(o)?(r(),i("div",ve,[e("img",{src:l.getObjectImage(o),alt:o.name||`Объект #${c+1}`,class:"w-32 h-32 object-cover rounded",onError:t[15]||(t[15]=(...y)=>l.handleImageError&&l.handleImageError(...y))},null,40,_e)])):d("",!0),e("div",he,[e("div",xe,a(o.name||`Объект #${c+1}`),1),o.builder?(r(),i("div",ye,[t[65]||(t[65]=e("span",{class:"font-medium"},"Застройщик:",-1)),u(" "+a(o.builder.name),1)])):d("",!0),o.address&&o.address.length>0?(r(),i("div",be,[t[66]||(t[66]=e("span",{class:"font-medium"},"Адрес:",-1)),u(" "+a(o.address[0]),1)])):d("",!0),o.region?(r(),i("div",ke,[t[67]||(t[67]=e("span",{class:"font-medium"},"Район:",-1)),u(" "+a(o.region.name),1)])):d("",!0),l.getObjectPrice(o)?(r(),i("div",De,[t[68]||(t[68]=e("span",{class:"font-medium"},"Цена:",-1)),u(" "+a(l.getObjectPrice(o)),1)])):d("",!0),o.deadline?(r(),i("div",we,[t[69]||(t[69]=e("span",{class:"font-medium"},"Срок сдачи:",-1)),u(" "+a(o.deadline),1)])):d("",!0),o.apart_count?(r(),i("div",Ie,[t[70]||(t[70]=e("span",{class:"font-medium"},"Квартир:",-1)),u(" "+a(o.apart_count)+" ",1),o.view_apart_count?(r(),i("span",Ne,"(на просмотре: "+a(o.view_apart_count)+")",1)):d("",!0)])):d("",!0),o.finishing?(r(),i("div",Ce,[t[71]||(t[71]=e("span",{class:"font-medium"},"Отделка:",-1)),u(" "+a(o.finishing),1)])):d("",!0),o.plots_count?(r(),i("div",Pe,[t[72]||(t[72]=e("span",{class:"font-medium"},"Количество участков:",-1)),u(" "+a(o.plots_count)+" ",1),o.view_plots_count?(r(),i("span",Me," (на просмотре: "+a(o.view_plots_count)+")",1)):d("",!0)])):d("",!0),o.premises_count?(r(),i("div",Ae,[t[73]||(t[73]=e("span",{class:"font-medium"},"Количество помещений:",-1)),u(" "+a(o.premises_count),1)])):d("",!0),o.district?(r(),i("div",Oe,[t[74]||(t[74]=e("span",{class:"font-medium"},"Район:",-1)),u(" "+a(o.district.name),1)])):d("",!0),o.distance?(r(),i("div",Te,[o.distance.center?(r(),i("div",Se,[e("span",Ue,a(o.distance.center.label),1),u(" "+a(o.distance.center.value),1)])):d("",!0),o.distance.railway?(r(),i("div",Ge,[e("span",Le,a(o.distance.railway.label),1),u(" "+a(o.distance.railway.value),1)])):d("",!0),o.distance.highway?(r(),i("div",Re,[e("span",Be,a(o.distance.highway.label),1),u(" "+a(o.distance.highway.value),1)])):d("",!0)])):d("",!0),l.getObjectReward(o)?(r(),i("div",Ee,[e("span",ze," Комиссия: "+a(l.getObjectReward(o)),1)])):d("",!0),o.image&&o.image.url?(r(),i("div",Qe,[e("a",{href:o.image.url,target:"_blank",class:"text-xs text-primary hover:underline"}," Открыть изображение ",8,Ve)])):d("",!0)])])]))),128))])])):d("",!0)])])):d("",!0)])])):d("",!0)])}const qe=b(I,[["render",Ye]]);export{qe as default};
