# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ: –ö–Ω–æ–ø–∫–∞ –∑–∞–ø—É—Å–∫–∞ –ø–∞—Ä—Å–µ—Ä–∞ –∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

**–î–∞—Ç–∞:** 29 –¥–µ–∫–∞–±—Ä—è 2025

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –ö–Ω–æ–ø–∫–∞ –∑–∞–ø—É—Å–∫–∞ –ø–∞—Ä—Å–µ—Ä–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/admin/parser`

**–§–∞–π–ª:** `resources/js/pages/admin/ParserDashboard.vue`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–µ—Ä" –≤ —Ä–∞–∑–¥–µ–ª "–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è"
- –ö–Ω–æ–ø–∫–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø–∞—Ä—Å–µ—Ä –¥–ª—è –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –≥–æ—Ä–æ–¥–æ–≤ –∏ —Ç–∏–ø–æ–≤ –æ–±—ä–µ–∫—Ç–æ–≤
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–∑–∞–ø—É—Å–∫ –ø–∞—Ä—Å–µ—Ä–∞...)
- –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥

**API Endpoint:**
- `POST /api/v1/parser/run` - –∑–∞–ø—É—Å–∫ –ø–∞—Ä—Å–µ—Ä–∞
- `GET /api/v1/parser/status` - —Å—Ç–∞—Ç—É—Å –ø–∞—Ä—Å–µ—Ä–∞ (–∑–∞–≥–ª—É—à–∫–∞)

**–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä:** `app/Http/Controllers/Api/ParserController.php`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**
```json
{
  "type": ["blocks", "parkings"],  // –¢–∏–ø—ã –æ–±—ä–µ–∫—Ç–æ–≤
  "city": ["msk", "spb"],          // GUID –≥–æ—Ä–æ–¥–æ–≤
  "check_images": true,            // –ü—Ä–æ–≤–µ—Ä—è—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
  "force": false,                  // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
  "limit": 1000,                   // –õ–∏–º–∏—Ç –æ–±—ä–µ–∫—Ç–æ–≤
  "skip_errors": false             // –ü—Ä–æ–ø—É—Å–∫–∞—Ç—å –æ—à–∏–±–∫–∏
}
```

### 2. Seeder –¥–ª—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π –ø–∞—Ä—Å–µ—Ä–∞

**–§–∞–π–ª:** `database/seeders/ParserSchedulesSeeder.php`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –°–æ–∑–¥–∞–µ—Ç —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –æ–±—ä–µ–∫—Ç–∞
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:
  - **–í—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞:** 05:00 - 05:30 (–∫–∞–∂–¥—ã–π –¥–µ–Ω—å)
  - **–î–Ω–∏ –Ω–µ–¥–µ–ª–∏:** –í—Å–µ –¥–Ω–∏ (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ)
  - **–ì–æ—Ä–æ–¥–∞:** –í—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –≥–æ—Ä–æ–¥–∞
  - **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:** –í–∫–ª—é—á–µ–Ω–∞
  - **–õ–∏–º–∏—Ç –æ–±—ä–µ–∫—Ç–æ–≤:** 1000 –Ω–∞ —Ç–∏–ø
  - **–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** –í—ã–∫–ª—é—á–µ–Ω–æ
  - **–ü—Ä–æ–ø—É—Å–∫ –æ—à–∏–±–æ–∫:** –í—ã–∫–ª—é—á–µ–Ω–æ

**–¢–∏–ø—ã –æ–±—ä–µ–∫—Ç–æ–≤ —Å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è–º–∏:**
1. `blocks` - –ë–ª–æ–∫–∏ (–ö–≤–∞—Ä—Ç–∏—Ä—ã)
2. `parkings` - –ü–∞—Ä–∫–∏–Ω–≥–∏
3. `villages` - –ü–æ—Å–µ–ª–∫–∏ (–î–æ–º–∞ —Å —É—á–∞—Å—Ç–∫–∞–º–∏)
4. `plots` - –£—á–∞—Å—Ç–∫–∏
5. `commercial-blocks` - –ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã
6. `commercial-premises` - –ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–µ –ø–æ–º–µ—â–µ–Ω–∏—è

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
php artisan db:seed --class=ParserSchedulesSeeder
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
```
üîÑ –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π –ø–∞—Ä—Å–µ—Ä–∞...

‚ûï –°–æ–∑–¥–∞–Ω–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è: –ë–ª–æ–∫–∏ (–ö–≤–∞—Ä—Ç–∏—Ä—ã)
‚ûï –°–æ–∑–¥–∞–Ω–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è: –ü–∞—Ä–∫–∏–Ω–≥–∏
‚ûï –°–æ–∑–¥–∞–Ω–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è: –ü–æ—Å–µ–ª–∫–∏ (–î–æ–º–∞ —Å —É—á–∞—Å—Ç–∫–∞–º–∏)
‚ûï –°–æ–∑–¥–∞–Ω–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è: –£—á–∞—Å—Ç–∫–∏
‚ûï –°–æ–∑–¥–∞–Ω–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è: –ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã
‚ûï –°–æ–∑–¥–∞–Ω–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è: –ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–µ –ø–æ–º–µ—â–µ–Ω–∏—è

‚úÖ –†–∞—Å–ø–∏—Å–∞–Ω–∏—è –ø–∞—Ä—Å–µ—Ä–∞ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω—ã!
```

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

–ö–∞–∂–¥–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏—Ç:
- `object_type` - –¢–∏–ø –æ–±—ä–µ–∫—Ç–∞ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞
- `city_ids` - `null` (–≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –≥–æ—Ä–æ–¥–∞)
- `time_from` - `05:00`
- `time_to` - `05:30`
- `days_of_week` - `null` (–≤—Å–µ –¥–Ω–∏ –Ω–µ–¥–µ–ª–∏)
- `is_active` - `true`
- `check_images` - `true`
- `force_update` - `false`
- `limit` - `1000`
- `offset` - `0`
- `skip_errors` - `false`
- `description` - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫

–†–∞—Å–ø–∏—Å–∞–Ω–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∫–æ–º–∞–Ω–¥–æ–π `trend:parse-scheduler`, –∫–æ—Ç–æ—Ä–∞—è:
- –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç (–Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –≤ `routes/console.php`)
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
- –ó–∞–ø—É—Å–∫–∞–µ—Ç –ø–∞—Ä—Å–µ—Ä –¥–ª—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –≤—ã–ø–æ–ª–Ω–∏—Ç—å—Å—è —Å–µ–π—á–∞—Å

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

1. **–°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∑–∞–ø—É—Å–∫:** –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `Artisan::call()`, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ. –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—á–µ—Ä–µ–¥–∏ (Queue) –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

2. **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** –ü–∞—Ä—Å–∏–Ω–≥ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, –æ—Å–æ–±–µ–Ω–Ω–æ –¥–ª—è –≤—Å–µ—Ö –≥–æ—Ä–æ–¥–æ–≤ –∏ —Ç–∏–ø–æ–≤ –æ–±—ä–µ–∫—Ç–æ–≤. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∑–∞–ø—É—Å–∫–∞—Ç—å –≤ —Ñ–æ–Ω–µ –∏–ª–∏ —á–µ—Ä–µ–∑ –æ—á–µ—Ä–µ–¥–∏.

3. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π:** Seeder –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è, –µ—Å–ª–∏ –æ–Ω–∏ —É–∂–µ –µ—Å—Ç—å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, –∏–ª–∏ —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–µ.

4. **–ì–∏–±–∫–æ—Å—Ç—å:** –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/admin/parser/schedules`.

## ‚úÖ –ò—Ç–æ–≥–∏

- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ –∑–∞–ø—É—Å–∫–∞ –ø–∞—Ä—Å–µ—Ä–∞ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
- ‚úÖ –°–æ–∑–¥–∞–Ω API endpoint –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø–∞—Ä—Å–µ—Ä–∞
- ‚úÖ –°–æ–∑–¥–∞–Ω seeder –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π
- ‚úÖ –°–æ–∑–¥–∞–Ω–æ 6 —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π (–ø–æ –æ–¥–Ω–æ–º—É –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –æ–±—ä–µ–∫—Ç–∞)
- ‚úÖ –í—Å–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –Ω–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –∑–∞–ø—É—Å–∫ –≤ 5:00 —É—Ç—Ä–∞
- ‚úÖ –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã –∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ git

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º—É –ø–∞—Ä—Å–∏–Ω–≥—É –¥–∞–Ω–Ω—ã—Ö –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 5:00 —É—Ç—Ä–∞!

