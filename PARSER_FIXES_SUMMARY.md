# Исправления парсера

## Исправленные проблемы

### 1. Добавлен обязательный параметр `show_type` для blocks

**Проблема:** API блоков требует параметр `show_type` со значениями ["list","table","map"]

**Решение:** Добавлен параметр `show_type='list'` в метод `buildParams()` для типа `blocks`

### 2. Передача типа объекта в buildParams

**Проблема:** Метод `buildParams()` не получал информацию о типе объекта

**Решение:** Добавлен параметр `$objectType` в метод `buildParams()` и передача типа при вызове

## Оставшиеся проблемы (требуют проверки API TrendAgent)

### 1. Паркинги - требуется ObjectId вместо GUID

**Ошибка:** `"Invalid ObjectId: spb"`

**Примечание:** API паркингов может требовать MongoDB ObjectId вместо GUID. Это может быть ограничение API TrendAgent для некоторых городов.

### 2. Ошибки 500 для villages, plots, commercial

**Ошибки:** Внутренние ошибки сервера TrendAgent API

**Примечание:** Это проблемы на стороне API TrendAgent. Возможно:
- API не поддерживает город spb для этих типов объектов
- Временные проблемы с API
- Требуется другой формат параметров

## Рекомендации

1. Для blocks - команда должна работать корректно после исправлений
2. Для других типов - проверить, поддерживается ли город spb в API TrendAgent
3. Попробовать использовать город msk для проверки работоспособности

