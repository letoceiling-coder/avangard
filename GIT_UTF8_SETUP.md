# Настройка Git для правильной работы с UTF-8

## Проблема

В истории коммитов отображаются кракозябры вместо русских букв (например, `СЃР±РѕСЂРєР°` вместо `сборка`). Это происходит из-за неправильной настройки кодировки в git и консоли.

## Решение

### 1. Настройка Git для UTF-8

Выполните следующие команды:

```bash
# Отключить автоматическое преобразование окончаний строк
git config --global core.autocrlf false

# Установить кодировку для коммитов
git config --global i18n.commitencoding utf-8

# Установить кодировку для вывода логов
git config --global i18n.logoutputencoding utf-8

# Отключить экранирование путей (для правильного отображения русских символов)
git config --global core.quotepath false

# Установить кодировку для веб-интерфейса (если используете)
git config --global gui.encoding utf-8
```

### 2. Настройка консоли Windows для UTF-8

В PowerShell выполните:

```powershell
# Установить кодировку UTF-8 для консоли
chcp 65001

# Или установить по умолчанию в профиле PowerShell
# Добавьте в $PROFILE: [Console]::OutputEncoding = [System.Text.Encoding]::UTF8
```

В CMD выполните:

```cmd
chcp 65001
```

### 3. Использование правильной кодировки при коммитах

При создании коммитов с русским текстом используйте:

```bash
# Через git commit (откроется редактор)
git commit

# Или через переменную окружения
git -c i18n.commitencoding=utf-8 commit -m "Ваше сообщение на русском"
```

### 4. Проверка настроек

Проверьте текущие настройки:

```bash
git config --global --get i18n.commitencoding
git config --global --get i18n.logoutputencoding
git config --global --get core.quotepath
```

Должно быть:
- `i18n.commitencoding = utf-8`
- `i18n.logoutputencoding = utf-8`
- `core.quotepath = false`

### 5. Исправление существующих коммитов

**⚠️ ВНИМАНИЕ:** Исправление истории коммитов может быть проблематичным, если коммиты уже запушены в удаленный репозиторий.

Если нужно исправить последний коммит:

```bash
# Изменить сообщение последнего коммита
git commit --amend -m "Новое сообщение на русском"
```

Для исправления старых коммитов потребуется `git rebase -i`, что может быть сложно.

### 6. Файл .gitattributes

В проекте уже создан файл `.gitattributes`, который указывает git использовать UTF-8 для всех текстовых файлов. Это поможет избежать проблем в будущем.

## Рекомендации

1. **Используйте английский язык для сообщений коммитов** - это стандартная практика и избегает проблем с кодировкой
2. **Если используете русский**, убедитесь, что консоль настроена на UTF-8
3. **Проверяйте сообщения коммитов** перед пушем: `git log --oneline -5`

## Примеры правильных коммитов

```bash
# Английский (рекомендуется)
git commit -m "fix: encoding setup for UTF-8"

# Русский (если консоль настроена на UTF-8)
git commit -m "fix: настройка кодировки UTF-8"
```

## Дополнительная информация

- [Git Documentation - i18n](https://git-scm.com/book/en/v2/Customizing-Git-Git-Configuration#_i18n)
- [Git Documentation - .gitattributes](https://git-scm.com/docs/gitattributes)


