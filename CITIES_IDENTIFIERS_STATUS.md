# –°—Ç–∞—Ç—É—Å –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ –≥–æ—Ä–æ–¥–æ–≤

## üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–Ω–∞ 28.12.2025)

### –í—Å–µ–≥–æ –≥–æ—Ä–æ–¥–æ–≤: 9

| –ì–æ—Ä–æ–¥ | GUID | External_ID (ObjectId) | CRM_ID | ID (–ë–î) |
|-------|------|------------------------|--------|---------|
| –ú–æ—Å–∫–≤–∞ | `msk` | ‚úÖ `5a5cb42159042faa9a218d04` | ‚ùå | 30 |
| –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥ | `spb` | ‚ùå | ‚ùå | 31 |
| –†–æ—Å—Ç–æ–≤-–Ω–∞-–î–æ–Ω—É | `rostov` | ‚ùå | ‚ùå | 32 |
| –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä | `krasnodar` | ‚ùå | ‚ùå | 33 |
| –°–æ—á–∏ | `sochi` | ‚ùå | ‚ùå | 34 |
| –ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥ | `ekb` | ‚ùå | ‚ùå | 35 |
| –ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫ | `nsk` | ‚ùå | ‚ùå | 36 |
| –ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫ | `krasnoyarsk` | ‚ùå | ‚ùå | 37 |
| –ë–µ–ª–≥–æ—Ä–æ–¥ | `belgorod` | ‚ùå | ‚ùå | 38 |

## –¢–∏–ø—ã –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤

### 1. **ID** (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≤ –ë–î)
- ‚úÖ –ï—Å—Ç—å —É –≤—Å–µ—Ö –≥–æ—Ä–æ–¥–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–≤—è–∑–µ–π –≤ –ë–î

### 2. **GUID** (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä/slug)
- ‚úÖ –ï—Å—Ç—å —É –≤—Å–µ—Ö –≥–æ—Ä–æ–¥–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ URL –∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö API –∑–∞–ø—Ä–æ—Å–∞—Ö
- –ü—Ä–∏–º–µ—Ä—ã: `msk`, `spb`, `rostov`

### 3. **External_ID** (MongoDB ObjectId)
- ‚úÖ –ï—Å—Ç—å —Ç–æ–ª—å–∫–æ —É –ú–æ—Å–∫–≤—ã: `5a5cb42159042faa9a218d04`
- ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —É 8 –≥–æ—Ä–æ–¥–æ–≤
- **–ö—Ä–∏—Ç–∏—á–Ω–æ –≤–∞–∂–Ω–æ** –¥–ª—è blocks API (—Ç—Ä–µ–±—É–µ—Ç ObjectId –≤–º–µ—Å—Ç–æ GUID)
- –ú–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –∏–∑ –æ—Ç–≤–µ—Ç–∞ blocks API

### 4. **CRM_ID** (–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≤ CRM —Å–∏—Å—Ç–µ–º–µ)
- ‚ùå –ù–µ –∑–∞–ø–æ–ª–Ω–µ–Ω –Ω–∏ —É –æ–¥–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞
- –ù–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã –ø–∞—Ä—Å–µ—Ä–∞
- –ú–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –∏–∑ –æ—Ç–≤–µ—Ç–∞ blocks API (–≤ –æ—Ç–≤–µ—Ç–µ –≤–∏–¥–µ–Ω `crm_id: 1` –¥–ª—è –ú–æ—Å–∫–≤—ã)

## –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å ObjectId –¥–ª—è –¥—Ä—É–≥–∏—Ö –≥–æ—Ä–æ–¥–æ–≤

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ò–∑ –æ—Ç–≤–µ—Ç–∞ blocks API
–ö–æ–º–∞–Ω–¥–∞ `php artisan cities:update-external-id` —Ç–µ–ø–µ—Ä—å:
1. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∏–∑–≤–µ—Å—Ç–Ω—ã–π ObjectId –ú–æ—Å–∫–≤—ã
2. –î–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ blocks API
3. –ò—â–µ—Ç –≤ –æ—Ç–≤–µ—Ç–µ ObjectId –¥—Ä—É–≥–∏—Ö –≥–æ—Ä–æ–¥–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞**: –í –æ—Ç–≤–µ—Ç–µ blocks API –¥–ª—è –ú–æ—Å–∫–≤—ã –≤—Å–µ –±–ª–æ–∫–∏ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç –ú–æ—Å–∫–≤–µ, –ø–æ—ç—Ç–æ–º—É ObjectId –¥—Ä—É–≥–∏—Ö –≥–æ—Ä–æ–¥–æ–≤ —Ç–∞–º –Ω–µ –±—É–¥–µ—Ç.

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Seeder
–°–æ–∑–¥–∞—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å seeder —Å –∏–∑–≤–µ—Å—Ç–Ω—ã–º–∏ ObjectId –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏–ª–∏ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –æ—Ç–≤–µ—Ç–æ–≤ API.

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ü–æ–ª—É—á–∏—Ç—å –∏–∑ –æ—Ç–≤–µ—Ç–∞ –¥—Ä—É–≥–∏—Ö API
–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥—Ä—É–≥–∏—Ö –≥–æ—Ä–æ–¥–æ–≤ —á–µ—Ä–µ–∑ –¥—Ä—É–≥–∏–µ endpoints, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å GUID.

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é TrendAgent API** –Ω–∞ –Ω–∞–ª–∏—á–∏–µ endpoint –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –≥–æ—Ä–æ–¥–æ–≤ —Å ObjectId
2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç–≤–µ—Ç blocks API** –¥–ª—è –ú–æ—Å–∫–≤—ã - –≤–æ–∑–º–æ–∂–Ω–æ, —Ç–∞–º –µ—Å—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
3. **–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å–∏—Ç—å blocks API –±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞ –ø–æ –≥–æ—Ä–æ–¥—É** (–µ—Å–ª–∏ —Ç–∞–∫–æ–π –∑–∞–ø—Ä–æ—Å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)
4. **–û–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏** TrendAgent –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–ª–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ ObjectId –≥–æ—Ä–æ–¥–æ–≤

