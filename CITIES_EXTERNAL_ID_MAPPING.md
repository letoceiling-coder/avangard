# Маппинг External_ID (MongoDB ObjectId) для городов

## Источник данных
ObjectId получены из HTML-списка городов на сайте TrendAgent (28.12.2025)

## Маппинг GUID → External_ID

| GUID | Название | External_ID (ObjectId) | Источник |
|------|----------|------------------------|----------|
| `msk` | Москва | `5a5cb42159042faa9a218d04` | HTML список TrendAgent |
| `spb` | Санкт-Петербург | `58c665588b6aa52311afa01b` | HTML список TrendAgent |
| `rostov` | Ростов-на-Дону | `61926fb5bb267a0008de132b` | HTML список TrendAgent |
| `sochi` | Сочи | `604b5243f9760700074ac345` | HTML список TrendAgent (Краснодарский край, Сочи, Республика Адыгея) |
| `krasnodar` | Краснодар | `604b5243f9760700074ac345` | HTML список TrendAgent (Краснодарский край, Сочи, Республика Адыгея) |
| `ekb` | Екатеринбург | `650974f78d34c0f790a012a9` | HTML список TrendAgent |
| `nsk` | Новосибирск | `618120c1a56997000866c4d8` | HTML список TrendAgent |

## Дополнительные города из списка TrendAgent (нет в нашей БД)

| ObjectId | Название | Примечание |
|----------|----------|------------|
| `682700dd0e7daf77097d0779` | Крым | New (есть на TrendAgent, нет в нашей БД) |
| `642157fca50429d21e3aa14f` | Казань | Есть на TrendAgent, нет в нашей БД |
| `674eff862307c824cf56ced3` | Уфа | New (есть на TrendAgent, нет в нашей БД) |

## Города в нашей БД, которых нет в списке TrendAgent

| GUID | Название | External_ID | Статус |
|------|----------|-------------|--------|
| `krasnoyarsk` | Красноярск | ❌ | Нет в списке TrendAgent |
| `belgorod` | Белгород | ❌ | Нет в списке TrendAgent |

## Особенности

1. **Краснодар и Сочи**: Используют один ObjectId `604b5243f9760700074ac345` (обозначается как "Краснодарский край, Сочи, Республика Адыгея")

2. **Новые города на TrendAgent**: Крым и Уфа помечены как "New", возможно, они недавно добавлены

3. **Отсутствующие города**: Красноярск и Белгород отсутствуют в списке TrendAgent, возможно:
   - Они не поддерживаются TrendAgent
   - У них другой ObjectId
   - Они используют другой идентификатор

## Использование

Обновить external_id для всех городов из списка:

```bash
php artisan db:seed --class=UpdateCitiesExternalIdSeeder
```

Проверить статус:

```bash
php check_cities_identifiers.php
```

