# ‚úÖ –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î –¥–ª—è –ø–∞—Ä—Å–µ—Ä–∞ TrendAgent

**–î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:** 2025-12-28  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ

---

## üéØ –ö—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞

### ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (100% –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)

1. **17 –º–∏–≥—Ä–∞—Ü–∏–π –ë–î** - –ø–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
2. **13 –º–æ–¥–µ–ª–µ–π Eloquent** - –≤—Å–µ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º–∏
3. **4 —Ñ–∏–ª—å—Ç—Ä–∞** - –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –æ–±—ä–µ–∫—Ç–æ–≤
4. **12 API Resources** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥
5. **4 FormRequest** - –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
6. **3 –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞** - CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ + —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∞–º–∏
7. **2 –∏—Å–∫–ª—é—á–µ–Ω–∏—è** - —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
8. **1 —Å–µ—Ä–≤–∏—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏** - –ø–æ–ª–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ API
9. **–¢–∞–±–ª–∏—Ü–∞ –æ—à–∏–±–æ–∫** - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ—à–∏–±–æ–∫ –ø–∞—Ä—Å–µ—Ä–∞
10. **5 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤** - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

## ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ - –ü–û–õ–ù–û–°–¢–¨–Æ –†–ï–ê–õ–ò–ó–û–í–ê–ù–ê

### üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

#### 1. **–¢–∞–±–ª–∏—Ü–∞ parser_errors**
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è `2025_12_28_120040_create_parser_errors_table.php`
- ‚úÖ –ú–æ–¥–µ–ª—å `ParserError` —Å –º–µ—Ç–æ–¥–∞–º–∏
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Ä–µ—à–µ–Ω–∏—è –æ—à–∏–±–æ–∫

#### 2. **–ò—Å–∫–ª—é—á–µ–Ω–∏—è**
- ‚úÖ `TrendParserException` - –±–∞–∑–æ–≤–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
- ‚úÖ `TrendApiException` - –¥–ª—è –æ—à–∏–±–æ–∫ API (—Å HTTP —Å—Ç–∞—Ç—É—Å–∞–º–∏, URL, response body)

#### 3. **–°–µ—Ä–≤–∏—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏**
- ‚úÖ `TrendDataSyncService::syncBlock()` - —Å –ø–æ–ª–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
- ‚úÖ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–ª—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤ `parser_errors`
- ‚úÖ –û–ø—Ü–∏–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

#### 4. **–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã**
- ‚úÖ Try-catch –±–ª–æ–∫–∏ –≤–æ –≤—Å–µ—Ö –º–µ—Ç–æ–¥–∞—Ö
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤ —Ñ–∞–π–ª—ã
- ‚úÖ –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ HTTP —Å—Ç–∞—Ç—É—Å –∫–æ–¥—ã
- ‚úÖ –°–∫—Ä—ã—Ç–∏–µ –¥–µ—Ç–∞–ª–µ–π –≤ production (—á–µ—Ä–µ–∑ `config('app.debug')`)

#### 5. **API –æ—à–∏–±–æ–∫**
- ‚úÖ `ParserErrorController` - –ø—Ä–æ—Å–º–æ—Ç—Ä –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∞–º–∏
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –ü–æ–º–µ—á–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –∫–∞–∫ —Ä–µ—à–µ–Ω–Ω—ã—Ö

---

## üîç –î–µ—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ (17 —Ñ–∞–π–ª–æ–≤)

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- [x] –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã
- [x] –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ foreign keys
- [x] –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ –≤–∞–∂–Ω—ã—Ö –ø–æ–ª—è—Ö
- [x] Soft deletes –≥–¥–µ –Ω—É–∂–Ω–æ
- [x] JSON –ø–æ–ª—è –¥–ª—è –≥–∏–±–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- [x] Decimal –¥–ª—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∏ —Ü–µ–Ω
- [x] Enum –¥–ª—è data_source
- [x] Timestamps –≤–µ–∑–¥–µ

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- `parser_errors` - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ—à–∏–±–æ–∫ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
- `data_sources` - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- `images` - –ø–æ–ª–∏–º–æ—Ä—Ñ–Ω–∞—è —Å–≤—è–∑—å
- –í—Å–µ pivot —Ç–∞–±–ª–∏—Ü—ã —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –ø–æ–ª—è–º–∏

### ‚úÖ –ú–æ–¥–µ–ª–∏ (13 —Ñ–∞–π–ª–æ–≤)

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- [x] –í—Å–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ (belongsTo, hasMany, belongsToMany)
- [x] –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ casts (integer, boolean, decimal, array, datetime)
- [x] Fillable –ø–æ–ª—è –∑–∞—â–∏—â–µ–Ω—ã
- [x] Scopes –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- [x] Accessors –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (—Ü–µ–Ω—ã, –¥–∞—Ç—ã)
- [x] Soft deletes –≥–¥–µ –Ω—É–∂–Ω–æ
- [x] BaseTrendModel —Å –æ–±—â–∏–º–∏ –º–µ—Ç–æ–¥–∞–º–∏

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü–æ–ª–∏–º–æ—Ä—Ñ–Ω—ã–µ —Å–≤—è–∑–∏ –¥–ª—è Image –∏ DataSource
- –ú–µ—Ç–æ–¥—ã `markAsParsed()`, `markAsSynced()`
- Scopes –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫—É –¥–∞–Ω–Ω—ã—Ö

### ‚úÖ –§–∏–ª—å—Ç—Ä—ã (4 —Ñ–∞–π–ª–∞)

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- [x] –í—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã –Ω–∞—Å–ª–µ–¥—É—é—Ç—Å—è –æ—Ç AbstractFilter
- [x] –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- [x] –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ü–µ–Ω –∏–∑ —Ä—É–±–ª–µ–π –≤ –∫–æ–ø–µ–π–∫–∏
- [x] –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ (–≥–¥–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)
- [x] –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏
- [x] –§–∏–ª—å—Ç—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (is_active = true)

### ‚úÖ Resources (12 —Ñ–∞–π–ª–æ–≤)

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- [x] –£—Å–ª–æ–≤–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å–≤—è–∑–µ–π (whenLoaded)
- [x] –í–ª–æ–∂–µ–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
- [x] –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—è (—Ü–µ–Ω—ã, –¥–∞—Ç—ã)
- [x] –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### ‚úÖ Form Requests (4 —Ñ–∞–π–ª–∞)

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- [x] –ü–æ–ª–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –ø–æ–ª–µ–π
- [x] –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ (exists, unique, nullable)
- [x] prepareForValidation –¥–ª—è –¥–µ—Ñ–æ–ª—Ç–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- [x] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ data_source –∏ is_active

### ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã (3 —Ñ–∞–π–ª–∞)

**BlockController:**
- [x] CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
- [x] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤–æ –≤—Å–µ—Ö –º–µ—Ç–æ–¥–∞—Ö
- [x] –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–≤—è–∑–µ–π (subways)
- [x] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- [x] –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ HTTP –∫–æ–¥—ã

**ParkingController:**
- [x] –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ BlockController
- [x] –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø–æ–ª—è –ø–∞—Ä–∫–∏–Ω–≥–∞

**ParserErrorController:**
- [x] –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—à–∏–±–æ–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
- [x] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫
- [x] –†–µ—à–µ–Ω–∏–µ –æ—à–∏–±–æ–∫

### ‚úÖ –°–µ—Ä–≤–∏—Å—ã (1 —Ñ–∞–π–ª)

**TrendDataSyncService:**
- [x] –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –±–ª–æ–∫–æ–≤ –∏–∑ API
- [x] –°–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤
- [x] –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–≤—è–∑–µ–π (subways, prices)
- [x] –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–ª—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏
- [x] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- [x] –ì–∏–±–∫–∏–µ –æ–ø—Ü–∏–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

---

## üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

### ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- [x] –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ FormRequest
- [x] –ó–∞—â–∏—Ç–∞ –æ—Ç SQL –∏–Ω—ä–µ–∫—Ü–∏–π (Eloquent ORM)
- [x] –ú–∞—Å—Å–æ–≤–æ–µ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ fillable
- [x] –°–∫—Ä—ã—Ç–∏–µ –¥–µ—Ç–∞–ª–µ–π –æ—à–∏–±–æ–∫ –≤ production
- [ ] ‚ö†Ô∏è –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ (authorize) - –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∂–µ
- [ ] ‚ö†Ô∏è Rate limiting - —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å

### ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- [x] –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ –≤—Å–µ—Ö –≤–∞–∂–Ω—ã—Ö –ø–æ–ª—è—Ö
- [x] Eager loading —Å–≤—è–∑–µ–π (with)
- [x] –ü–∞–≥–∏–Ω–∞—Ü–∏—è –≤–µ–∑–¥–µ
- [x] –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ per_page (1-100)
- [ ] ‚ö†Ô∏è –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤ - —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è

### ‚úÖ –¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö

- [x] Foreign keys —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ onDelete
- [x] –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- [x] Soft deletes –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
- [x] Unique –∏–Ω–¥–µ–∫—Å—ã (guid, external_id)
- [x] –í–∞–ª–∏–¥–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ –≤ FormRequest

### ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API

- [x] –ò—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫
- [x] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ç–∞–±–ª–∏—Ü—É parser_errors
- [x] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (URL, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, response)
- [x] –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ–ø—ã—Ç–æ–∫
- [x] –°—Ç–∞—Ç—É—Å —Ä–µ—à–µ–Ω–∏—è –æ—à–∏–±–æ–∫
- [ ] ‚ö†Ô∏è Retry –º–µ—Ö–∞–Ω–∏–∑–º - —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å

---

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ routes/api.php

```php
use App\Http\Controllers\Api\BlockController;
use App\Http\Controllers\Api\ParkingController;
use App\Http\Controllers\Api\ParserErrorController;

Route::middleware('auth:sanctum')->prefix('v1')->group(function () {
    // –û—Å–Ω–æ–≤–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
    Route::apiResource('blocks', BlockController::class);
    Route::apiResource('parkings', ParkingController::class);
    
    // –û—à–∏–±–∫–∏ –ø–∞—Ä—Å–µ—Ä–∞
    Route::get('parser-errors/statistics', [ParserErrorController::class, 'statistics']);
    Route::post('parser-errors/{parserError}/resolve', [ParserErrorController::class, 'resolve']);
    Route::apiResource('parser-errors', ParserErrorController::class)->only(['index', 'show']);
});
```

---

## üîß –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### 1. Retry –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è API –æ—à–∏–±–æ–∫
```php
// –í TrendSsoApiAuth –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Å–µ—Ä–≤–∏—Å–µ
public function retryApiCall(callable $callback, int $maxAttempts = 3)
{
    $attempt = 0;
    while ($attempt < $maxAttempts) {
        try {
            return $callback();
        } catch (TrendApiException $e) {
            $attempt++;
            if ($attempt >= $maxAttempts) {
                throw $e;
            }
            sleep(pow(2, $attempt)); // –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞
        }
    }
}
```

### 2. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤
```php
// –í –º–æ–¥–µ–ª—è—Ö City, Builder –∏ —Ç.–¥.
public static function getCached($guid)
{
    return Cache::remember("city_{$guid}", 3600, function() use ($guid) {
        return static::where('guid', $guid)->first();
    });
}
```

### 3. –ö–æ–Ω—Å–æ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
```php
php artisan trend:sync-blocks --count=100
php artisan trend:clear-old-errors --days=30
php artisan trend:retry-failed --error-type=api
```

### 4. –û—á–µ—Ä–µ–¥–∏ –¥–ª—è —Ñ–æ–Ω–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
```php
// Jobs –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
SyncBlockJob::dispatch($apiData)->onQueue('trend-sync');
```

---

## ‚úÖ –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ: **95%**

**‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–æ:**
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î (100%)
- –ú–æ–¥–µ–ª–∏ –∏ –æ—Ç–Ω–æ—à–µ–Ω–∏—è (100%)
- –§–∏–ª—å—Ç—Ä—ã (100%)
- Resources (100%)
- Form Requests (100%)
- –ë–∞–∑–æ–≤—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã (100%)
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (100%)** ‚≠ê
- –°–µ—Ä–≤–∏—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (100%)
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ (100%)

**‚ö†Ô∏è –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å:**
- Retry –º–µ—Ö–∞–Ω–∏–∑–º (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –ö–æ–Ω—Å–æ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –¢–µ—Å—Ç—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- Rate limiting (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

---

## üéØ –í—ã–≤–æ–¥

**–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

‚úÖ –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã  
‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–∞  
‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞  
‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–ª–Ω–∞—è  

–ú–æ–∂–Ω–æ –Ω–∞—á–∏–Ω–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ TrendAgent API.

